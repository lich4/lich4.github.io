<!DOCTYPE html>
<html lang="zh-CN"
  dir="ltr">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">



<link rel="icon" type="image/ico" href="https://lich4.github.io//favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://lich4.github.io//favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://lich4.github.io//favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://lich4.github.io//android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://lich4.github.io//apple-touch-icon.png">

<meta name="description" content=""/>

<title>
    
    开发爬虫获取医院信息和疾病病症医学数据库 | 超哥的博客
    
</title>

<link rel="canonical" href="https://lich4.github.io/android_posts/20140406_hospital/"/>












<link rel="stylesheet" href="/assets/combined.min.cbcb816aefdb3b7380c5921cbb3b89d12f07742cb3f869754adb56da84f0d729.css" media="all">









  </head>

  

  
  
  

  <body class="light">

    <div class="content">
      <header>
        

<div class="header">

    

</div>

      </header>

      <main class="main">
        





<div class="breadcrumbs">
    
    <a href="/">Home</a>
    <span class="breadcrumbs-separator"> > </span>
    
    <a href="/android_posts/">Android_posts</a>
    <span class="breadcrumbs-separator"> > </span>
    
    <a class="breadcrumbs-current" href="/android_posts/20140406_hospital/">开发爬虫获取医院信息和疾病病症医学数据库</a>
</div>



<div >

  <div class="single-intro-container">

    

    <h1 class="single-title">开发爬虫获取医院信息和疾病病症医学数据库</h1>
    
    <p class="single-summary">开发爬虫获取医院信息和疾病病症医学数据库</p>
    

    

    <p class="single-readtime">
      
      
      
      <time datetime="2014-04-18T00:00:00&#43;00:00">April 18, 2014</time>
      

      
    </p>

  </div>

  

  
  
  

  

  
  <aside class="toc">
    <p><strong>Table of contents</strong></p>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#背景">背景</a></li>
    <li><a href="#爬取医院数据">爬取医院数据</a></li>
    <li><a href="#医院数据展示">医院数据展示</a></li>
    <li><a href="#爬取疾病数据">爬取疾病数据</a></li>
  </ul>
</nav>
  </aside>
  

  

  <div class="single-content">
    <h2 id="背景">背景</h2>
<p>  本项目是我在南京大学实习时开发的项目。年代比较久远，仅当记录<br>
  由于项目需要，人手又不够，不可能自己从江苏省人民医院里一个个提取信息做网页放到自己的网站中。这里就是程序设计的精髓了，程序就是用来解决大量的重复的劳动的，如果你能手动实现某过程的一个细节，且这些细节具有相似性，那么你就可以很容易用程序做出。还是用jsoup。运行以后会获得300M的数据，包括处理过的图像和生成的xml，医生信息和科室信息。</p>
<h2 id="爬取医院数据">爬取医院数据</h2>
<p>jsph.java</p>
<div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#ec0000">package</span> jsph;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.BufferedWriter;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.File;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.FileOutputStream;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.InputStream;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.OutputStreamWriter;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.UnsupportedEncodingException;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.Writer;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.net.URL;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.net.URLConnection;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.Jsoup;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Document;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Element;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Node;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.select.Elements;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">public</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">jsph</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> String keshijieshao<span style="color:#ec0000">=</span><span style="color:#008900">&#34;http://www.jsph.net/col/col25/index.html&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> String<span style="color:#ec0000">[]</span> names<span style="color:#ec0000">=</span>{<span style="color:#008900">&#34;内科&#34;</span>,<span style="color:#008900">&#34;外科&#34;</span>,<span style="color:#008900">&#34;老年医学科&#34;</span>,<span style="color:#008900">&#34;康复医学科&#34;</span>,<span style="color:#008900">&#34;妇产科&#34;</span>,<span style="color:#008900">&#34;儿科&#34;</span>,<span style="color:#008900">&#34;门急诊&#34;</span>,<span style="color:#008900">&#34;医技&#34;</span>};
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> String<span style="color:#ec0000">[]</span> addrs<span style="color:#ec0000">=</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col861/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col862/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col863/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col864/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col865/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col866/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col867/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#008900">&#34;http://www.jsph.net/col/col868/index.html&#34;</span>,
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> String url<span style="color:#ec0000">=</span><span style="color:#008900">&#34;http://www.jsph.net/script/0/nav.js&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> <span style="color:#5f5fff">int</span> threadnum<span style="color:#ec0000">=</span>0;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">jsph</span>()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        Document keshidoc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(keshijieshao).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                        Elements toprocess<span style="color:#ec0000">=</span>keshidoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a[style=font-size:14px;]&#34;</span>);
</span></span><span style="display:flex;"><span>                        toprocess.<span style="color:#5f5fff">addAll</span>(keshidoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a[style=font-size:14px; width:100px]&#34;</span>));
</span></span><span style="display:flex;"><span>//                        processKeshi(toprocess);
</span></span><span style="display:flex;"><span>                        Elements doctorlist<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> Elements();
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#5f5fff">int</span> i,j;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>names.<span style="color:#5f5fff">length</span>;i<span style="color:#ec0000">++</span>)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Document doc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(addrs<span style="color:#ec0000">[</span>i<span style="color:#ec0000">]</span>).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                Elements eles<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;td[width=752]&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">for</span>(j<span style="color:#ec0000">=</span>11;j<span style="color:#ec0000">&lt;</span>eles.<span style="color:#5f5fff">size</span>();j<span style="color:#ec0000">+=</span>2)
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        doctorlist.<span style="color:#5f5fff">addAll</span>(eles.<span style="color:#5f5fff">get</span>(j).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>));
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(j<span style="color:#ec0000">+</span>1<span style="color:#ec0000">&lt;</span>eles.<span style="color:#5f5fff">size</span>() <span style="color:#ec0000">&amp;&amp;</span> eles.<span style="color:#5f5fff">get</span>(j<span style="color:#ec0000">+</span>1).<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;&#34;</span>))
</span></span><span style="display:flex;"><span>                                                j<span style="color:#ec0000">++</span>;
</span></span><span style="display:flex;"><span>                                }                                
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(Element ss:doctorlist)
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(ss.<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                        processYisheng(doctorlist);
</span></span><span style="display:flex;"><span>                } 
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">catch</span> (Exception e)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">c</span>(String src) <span style="color:#ec0000">throws</span> Exception
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>//                return src;
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">return</span> <span style="color:#ec0000">new</span> String(src.<span style="color:#5f5fff">getBytes</span>(),<span style="color:#008900">&#34;gb2312&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">processKeshi</span>(Elements eles) <span style="color:#ec0000">throws</span> Exception
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                FileOutputStream fos<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(<span style="color:#008900">&#34;重点专科.xml&#34;</span>);
</span></span><span style="display:flex;"><span>                OutputStreamWriter osw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> OutputStreamWriter(fos,<span style="color:#008900">&#34;UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>                BufferedWriter bw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> BufferedWriter(osw);
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;?xml version=&#34;</span>1.<span style="color:#5f5fff">0</span><span style="color:#008900">&#34; encoding=&#34;</span>utf<span style="color:#ec0000">-</span>8<span style="color:#008900">&#34;?&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;keshis&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;内科&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;外科&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));        
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;老年病学科&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;13&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;康复医学科&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;summary&gt;江苏省人民医院康复医学科成立于1956年，55年来学科发展迅速，目前已成立了康复医学中心。&#34;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">+</span> <span style="color:#008900">&#34;现有康复门诊800平方米，病房76张床位、盛泽分院康复医学科22张床位，江苏省人民医院康复医学分院是国内三级甲等&#34;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">+</span> <span style="color:#008900">&#34;医院中临床规模最大、设备最齐全、技术实力最强的科室之一&lt;/summary&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;detailurl&gt;康复医学科.htm&lt;/detailurl&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;37&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;妇产科&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;儿科&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;28&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;门急诊&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;name&gt;医技&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;isroot&gt;true&lt;/isroot&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                String fatherkeshiname<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>eles.<span style="color:#5f5fff">size</span>();i<span style="color:#ec0000">++</span>)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        Document curdoc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                        Elements temp1<span style="color:#ec0000">=</span>curdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a[style=color:#0053a3;]&#34;</span>);
</span></span><span style="display:flex;"><span>                        String curfather<span style="color:#ec0000">=</span>temp1.<span style="color:#5f5fff">get</span>(temp1.<span style="color:#5f5fff">size</span>()<span style="color:#ec0000">-</span>2).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(<span style="color:#008900">&#34;father:&#34;</span><span style="color:#ec0000">+</span>curfather);
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(i <span style="color:#ec0000">==</span> 0)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;&#34;</span><span style="color:#ec0000">+</span>curfather<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                                fatherkeshiname<span style="color:#ec0000">=</span>curfather;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>fatherkeshiname.<span style="color:#5f5fff">equals</span>(curfather))
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/&#34;</span><span style="color:#ec0000">+</span>fatherkeshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                                fatherkeshiname<span style="color:#ec0000">=</span>curfather;
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;&#34;</span><span style="color:#ec0000">+</span>fatherkeshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;name&gt;&#34;</span><span style="color:#ec0000">+</span>eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        Elements inner<span style="color:#ec0000">=</span>curdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;td[style=padding:0px 10px 0px 10px;]\n&#34;</span>);
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;summary&gt;&#34;</span><span style="color:#ec0000">+</span>getProperText(inner.<span style="color:#5f5fff">text</span>())<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/summary&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        String keshiname<span style="color:#ec0000">=</span>eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;detailurl&gt;&#34;</span><span style="color:#ec0000">+</span>keshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;.htm&lt;/detailurl&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;/keshi&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(i <span style="color:#ec0000">==</span> eles.<span style="color:#5f5fff">size</span>()<span style="color:#ec0000">-</span>1)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/&#34;</span><span style="color:#ec0000">+</span>curfather<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        FileOutputStream infos<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(keshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;.htm&#34;</span>);
</span></span><span style="display:flex;"><span>                        OutputStreamWriter inosw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> OutputStreamWriter(infos,<span style="color:#008900">&#34;UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>                        BufferedWriter inbw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> BufferedWriter(inosw);
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;?xml version=&#34;</span>1.<span style="color:#5f5fff">0</span><span style="color:#008900">&#34; encoding=&#34;</span>utf<span style="color:#ec0000">-</span>8<span style="color:#008900">&#34;?&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;!DOCTYPE html PUBLIC &#34;</span><span style="color:#ec0000">-</span>//WAPFORUM//DTD XHTML Mobile 1.0//EN&#34;&#34;http://www.wapforum.org/DTD/xhtml-mobile10.dtd&#34;&gt;\n&#34;));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;html xmlns=&#34;</span>http://www.w3.org/1999/xhtml&#34;&gt;\n&#34;));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;head&gt;&lt;style type=&#34;</span>text<span style="color:#ec0000">/</span>css<span style="color:#008900">&#34;&gt;body{font-size:medium;line-height:1.5em;text-align:left}&lt;/style&gt;&lt;title&gt;&#34;</span><span style="color:#ec0000">+</span>keshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/title&gt;&lt;/head&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;body&gt;\n\t&lt;div&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(inner.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>).<span style="color:#5f5fff">size</span>() <span style="color:#ec0000">!=</span> 0)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Document detailpage<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(inner.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                Elements content<span style="color:#ec0000">=</span>detailpage.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div#zoom p&#34;</span>);
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">for</span>(Element el:content.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;img&#34;</span>))
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">final</span> String url<span style="color:#ec0000">=</span>el.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:src&#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">final</span> String dst<span style="color:#ec0000">=</span>el.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;src&#34;</span>);
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">while</span>(threadnum <span style="color:#ec0000">&gt;</span> 10)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                Thread.<span style="color:#5f5fff">sleep</span>(1000);
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">new</span> Thread()
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        threadnum<span style="color:#ec0000">++</span>;
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                downloadImage(url,dst,<span style="color:#ec0000">false</span>);
</span></span><span style="display:flex;"><span>                                                        } 
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">catch</span> (Exception e) 
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                // TODO Auto-generated catch block
</span></span><span style="display:flex;"><span>                                                                e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                                        }
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                threadnum<span style="color:#ec0000">--</span>;
</span></span><span style="display:flex;"><span>                                                        }
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }.<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                
</span></span><span style="display:flex;"><span>                                inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&#34;</span><span style="color:#ec0000">+</span>content.<span style="color:#5f5fff">html</span>().<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#34;/picture&#34;</span>,<span style="color:#008900">&#34;picture&#34;</span>)<span style="color:#ec0000">+</span><span style="color:#008900">&#34;\n&#34;</span>));        
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                        inosw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                        infos.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;/keshis&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                osw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                fos.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">downloadImage</span>(String url,String dir,<span style="color:#5f5fff">boolean</span> change) <span style="color:#ec0000">throws</span> Exception//下载图片并处理成合适大小
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                String origindir<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> String(dir);
</span></span><span style="display:flex;"><span>                File file<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>                StringBuilder curpath<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">if</span>(dir.<span style="color:#5f5fff">charAt</span>(0) <span style="color:#ec0000">==</span> <span style="color:#008900">&#39;/&#39;</span>)
</span></span><span style="display:flex;"><span>                        dir<span style="color:#ec0000">=</span>dir.<span style="color:#5f5fff">substring</span>(1);
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">while</span>(dir.<span style="color:#5f5fff">indexOf</span>(<span style="color:#008900">&#39;/&#39;</span>) <span style="color:#ec0000">!=</span> <span style="color:#ec0000">-</span>1)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#5f5fff">int</span> index<span style="color:#ec0000">=</span>dir.<span style="color:#5f5fff">indexOf</span>(<span style="color:#008900">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>                        curpath.<span style="color:#5f5fff">append</span>(dir.<span style="color:#5f5fff">substring</span>(0,index));
</span></span><span style="display:flex;"><span>                        file<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> File(curpath.<span style="color:#5f5fff">toString</span>());
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>file.<span style="color:#5f5fff">exists</span>())
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                file.<span style="color:#5f5fff">mkdir</span>();
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        curpath.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>                        dir<span style="color:#ec0000">=</span>dir.<span style="color:#5f5fff">substring</span>(index<span style="color:#ec0000">+</span>1);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#5f5fff">int</span> byteread<span style="color:#ec0000">=</span>0;
</span></span><span style="display:flex;"><span>            <span style="color:#5f5fff">int</span> bytesum<span style="color:#ec0000">=</span>0;
</span></span><span style="display:flex;"><span>            URL weburl<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> URL(url);
</span></span><span style="display:flex;"><span>            URLConnection con<span style="color:#ec0000">=</span>weburl.<span style="color:#5f5fff">openConnection</span>();
</span></span><span style="display:flex;"><span>            InputStream instream<span style="color:#ec0000">=</span>con.<span style="color:#5f5fff">getInputStream</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span>(<span style="color:#ec0000">new</span> File(curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span>dir).<span style="color:#5f5fff">exists</span>())
</span></span><span style="display:flex;"><span>                    <span style="color:#ec0000">return</span>;
</span></span><span style="display:flex;"><span>            FileOutputStream fs<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span>dir);
</span></span><span style="display:flex;"><span>            FileOutputStream sfs<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span>(change)
</span></span><span style="display:flex;"><span>                    sfs<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34;small_&#34;</span><span style="color:#ec0000">+</span>dir);
</span></span><span style="display:flex;"><span>            <span style="color:#5f5fff">byte</span><span style="color:#ec0000">[]</span> buffer<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> <span style="color:#5f5fff">byte</span><span style="color:#ec0000">[</span>65536<span style="color:#ec0000">]</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">while</span>((byteread<span style="color:#ec0000">=</span>instream.<span style="color:#5f5fff">read</span>(buffer)) <span style="color:#ec0000">!=</span> <span style="color:#ec0000">-</span>1)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                     bytesum<span style="color:#ec0000">+=</span>byteread;
</span></span><span style="display:flex;"><span>                     fs.<span style="color:#5f5fff">write</span>(buffer,0,byteread);
</span></span><span style="display:flex;"><span>                     <span style="color:#ec0000">if</span>(change)
</span></span><span style="display:flex;"><span>                             sfs.<span style="color:#5f5fff">write</span>(buffer,0,byteread);
</span></span><span style="display:flex;"><span>                     System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(<span style="color:#008900">&#34;\t\t当前下载文件：&#34;</span><span style="color:#ec0000">+</span>url<span style="color:#ec0000">+</span><span style="color:#008900">&#34;\t当前大小：&#34;</span><span style="color:#ec0000">+</span>bytesum);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span>(change)
</span></span><span style="display:flex;"><span>                    sfs.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>            fs.<span style="color:#5f5fff">close</span>(); 
</span></span><span style="display:flex;"><span>            instream.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span>(change)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                //处理图片
</span></span><span style="display:flex;"><span>                    ImageUtil.<span style="color:#5f5fff">resize</span>(curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span>dir,curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span>dir,160,200);
</span></span><span style="display:flex;"><span>                          ImageUtil.<span style="color:#5f5fff">resize</span>(curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34;small_&#34;</span><span style="color:#ec0000">+</span>dir,curpath.<span style="color:#5f5fff">toString</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34;small_&#34;</span><span style="color:#ec0000">+</span>dir,80,100);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">MyThread</span> <span style="color:#ec0000">extends</span> Thread
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String downloadurl;
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String picurl;
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> BufferedWriter bwp;
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String doctorname;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">MyThread</span>(Elements info,String picurl,BufferedWriter bwp,<span style="color:#5f5fff">int</span> i,Elements eles)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        downloadurl<span style="color:#ec0000">=</span>info.<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;img&#34;</span>).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:src&#34;</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">picurl</span><span style="color:#ec0000">=</span>picurl;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">bwp</span><span style="color:#ec0000">=</span>bwp;
</span></span><span style="display:flex;"><span>                        doctorname<span style="color:#ec0000">=</span>eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        threadnum<span style="color:#ec0000">++</span>;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">try</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                downloadImage(downloadurl,picurl,<span style="color:#ec0000">true</span>);
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">catch</span>(Exception e)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        bwp.<span style="color:#5f5fff">write</span>(<span style="color:#008900">&#34;无头像：&#34;</span><span style="color:#ec0000">+</span>doctorname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;\n&#34;</span>);
</span></span><span style="display:flex;"><span>                                } 
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">catch</span> (IOException e1) 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        // TODO Auto-generated catch block
</span></span><span style="display:flex;"><span>                                        e1.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                threadnum<span style="color:#ec0000">--</span>;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">processYisheng</span>(Elements eles) <span style="color:#ec0000">throws</span> Exception
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                FileOutputStream fos<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(<span style="color:#008900">&#34;名医大全.xml&#34;</span>);
</span></span><span style="display:flex;"><span>                OutputStreamWriter osw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> OutputStreamWriter(fos,<span style="color:#008900">&#34;UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>                BufferedWriter bw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> BufferedWriter(osw);
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;?xml version=&#34;</span>1.<span style="color:#5f5fff">0</span><span style="color:#008900">&#34; encoding=&#34;</span>utf<span style="color:#ec0000">-</span>8<span style="color:#008900">&#34;?&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;doctors&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                String fatherkeshiname<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                FileOutputStream fosp<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(<span style="color:#008900">&#34;其他信息.xml&#34;</span>);
</span></span><span style="display:flex;"><span>                OutputStreamWriter oswp<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> OutputStreamWriter(fosp);
</span></span><span style="display:flex;"><span>                BufferedWriter bwp<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> BufferedWriter(oswp);        
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>eles.<span style="color:#5f5fff">size</span>();i<span style="color:#ec0000">++</span>)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        Thread.<span style="color:#5f5fff">sleep</span>(200);
</span></span><span style="display:flex;"><span>                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>));
</span></span><span style="display:flex;"><span>                        Document curdoc;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                curdoc <span style="color:#ec0000">=</span> Jsoup.<span style="color:#5f5fff">connect</span>(eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                        } 
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">catch</span> (Exception e1) 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                // TODO Auto-generated catch block
</span></span><span style="display:flex;"><span>                                e1.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                i<span style="color:#ec0000">--</span>;
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">continue</span>;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        Elements temp1<span style="color:#ec0000">=</span>curdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a[style=color:#0053a3;]&#34;</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(temp1.<span style="color:#5f5fff">size</span>() <span style="color:#ec0000">&lt;</span> 2)//竟然使用了个人主页!!!
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bwp.<span style="color:#5f5fff">write</span>(<span style="color:#008900">&#34;个人主页：&#34;</span><span style="color:#ec0000">+</span>eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34;\n&#34;</span>);
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">continue</span>;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        String curfather<span style="color:#ec0000">=</span>temp1.<span style="color:#5f5fff">get</span>(temp1.<span style="color:#5f5fff">size</span>()<span style="color:#ec0000">-</span>2).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(<span style="color:#008900">&#34;father:&#34;</span><span style="color:#ec0000">+</span>curfather);
</span></span><span style="display:flex;"><span>                        Elements info<span style="color:#ec0000">=</span>curdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;td[style=padding:6px 0px;] table tbody tr td table tbody tr&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                        String picurl<span style="color:#ec0000">=</span>info.<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;img&#34;</span>).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;src&#34;</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#5f5fff">int</span> index<span style="color:#ec0000">=</span>picurl.<span style="color:#5f5fff">lastIndexOf</span>(<span style="color:#008900">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>                        String spicurl<span style="color:#ec0000">=</span>picurl.<span style="color:#5f5fff">substring</span>(0,index<span style="color:#ec0000">+</span>1)<span style="color:#ec0000">+</span><span style="color:#008900">&#34;small_&#34;</span><span style="color:#ec0000">+</span>picurl.<span style="color:#5f5fff">substring</span>(index<span style="color:#ec0000">+</span>1);
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(spicurl.<span style="color:#5f5fff">charAt</span>(0) <span style="color:#ec0000">==</span> <span style="color:#008900">&#39;/&#39;</span>)
</span></span><span style="display:flex;"><span>                                spicurl<span style="color:#ec0000">=</span>spicurl.<span style="color:#5f5fff">substring</span>(1);
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(i <span style="color:#ec0000">==</span> 0)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;&#34;</span><span style="color:#ec0000">+</span>curfather<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                                fatherkeshiname<span style="color:#ec0000">=</span>curfather;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>fatherkeshiname.<span style="color:#5f5fff">equals</span>(curfather))
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/&#34;</span><span style="color:#ec0000">+</span>fatherkeshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                                fatherkeshiname<span style="color:#ec0000">=</span>curfather;
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;&#34;</span><span style="color:#ec0000">+</span>fatherkeshiname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;doctor&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;name&gt;&#34;</span><span style="color:#ec0000">+</span>eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/name&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;id&gt;&lt;/id&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        Elements inner<span style="color:#ec0000">=</span>info.<span style="color:#5f5fff">get</span>(2).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;summary&gt;&#34;</span><span style="color:#ec0000">+</span>inner.<span style="color:#5f5fff">get</span>(2).<span style="color:#5f5fff">text</span>()<span style="color:#ec0000">+</span>getProperText(inner.<span style="color:#5f5fff">get</span>(4).<span style="color:#5f5fff">text</span>())<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/summary&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        String doctorname<span style="color:#ec0000">=</span>eles.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;detailurl&gt;&#34;</span><span style="color:#ec0000">+</span>doctorname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;.htm&lt;/detailurl&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">while</span>(threadnum <span style="color:#ec0000">&gt;</span> 2)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Thread.<span style="color:#5f5fff">sleep</span>(1000);
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">new</span> MyThread(info,picurl,bwp,i,eles).<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;smallpicurl&gt;&#34;</span><span style="color:#ec0000">+</span>spicurl<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/smallpicurl&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t\t&lt;usefulinfourl&gt;&#34;</span><span style="color:#ec0000">+</span>doctorname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;.xml&lt;/usefulinfourl&gt;\n&#34;</span>));//排班、评价、，，，
</span></span><span style="display:flex;"><span>                        bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&lt;/doctor&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(i <span style="color:#ec0000">==</span> eles.<span style="color:#5f5fff">size</span>()<span style="color:#ec0000">-</span>1)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/&#34;</span><span style="color:#ec0000">+</span>curfather<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        FileOutputStream infos<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> FileOutputStream(doctorname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;.htm&#34;</span>);
</span></span><span style="display:flex;"><span>                        OutputStreamWriter inosw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> OutputStreamWriter(infos,<span style="color:#008900">&#34;UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>                        BufferedWriter inbw<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> BufferedWriter(inosw);
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;?xml version=&#34;</span>1.<span style="color:#5f5fff">0</span><span style="color:#008900">&#34; encoding=&#34;</span>utf<span style="color:#ec0000">-</span>8<span style="color:#008900">&#34;?&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;!DOCTYPE html PUBLIC &#34;</span><span style="color:#ec0000">-</span>//WAPFORUM//DTD XHTML Mobile 1.0//EN&#34;&#34;http://www.wapforum.org/DTD/xhtml-mobile10.dtd&#34;&gt;\n&#34;));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;html xmlns=&#34;</span>http://www.w3.org/1999/xhtml&#34;&gt;\n&#34;));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;head&gt;&lt;style type=&#34;</span>text<span style="color:#ec0000">/</span>css<span style="color:#008900">&#34;&gt;body{font-size:medium;line-height:1.5em;text-align:left}&lt;/style&gt;&lt;title&gt;&#34;</span><span style="color:#ec0000">+</span>doctorname<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&lt;/title&gt;&lt;/head&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;body&gt;\n\t&lt;div&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(Element el:info.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;img&#34;</span>))
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">final</span> String url<span style="color:#ec0000">=</span>el.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:src&#34;</span>);
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">final</span> String dst<span style="color:#ec0000">=</span>el.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;src&#34;</span>);
</span></span><span style="display:flex;"><span>                                
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">while</span>(threadnum <span style="color:#ec0000">&gt;</span> 10)
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        Thread.<span style="color:#5f5fff">sleep</span>(1000);
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">new</span> Thread()
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                threadnum<span style="color:#ec0000">++</span>;
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        downloadImage(url,dst,<span style="color:#ec0000">false</span>);
</span></span><span style="display:flex;"><span>                                                } 
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">catch</span> (Exception e) 
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        // TODO Auto-generated catch block
</span></span><span style="display:flex;"><span>                                                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        threadnum<span style="color:#ec0000">--</span>;
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                }.<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t\t&#34;</span><span style="color:#ec0000">+</span>info.<span style="color:#5f5fff">html</span>().<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#34;/picture&#34;</span>,<span style="color:#008900">&#34;picture&#34;</span>)<span style="color:#ec0000">+</span><span style="color:#008900">&#34;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;\t&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;&#34;</span>));
</span></span><span style="display:flex;"><span>                        inbw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                        inosw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                        infos.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">write</span>(c(<span style="color:#008900">&#34;&lt;/doctors&gt;\n&#34;</span>));
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                osw.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                fos.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                bwp.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                oswp.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                fosp.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> String <span style="color:#5f5fff">getProperText</span>(String src)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                src<span style="color:#ec0000">=</span>src.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#34;????&#34;</span>,<span style="color:#008900">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">if</span>(src.<span style="color:#5f5fff">length</span>() <span style="color:#ec0000">&gt;</span> 128)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        StringBuilder sb<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> StringBuilder(src.<span style="color:#5f5fff">substring</span>(0, 128));
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>128;i<span style="color:#ec0000">&lt;</span>src.<span style="color:#5f5fff">length</span>();i<span style="color:#ec0000">++</span>)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                <span style="color:#5f5fff">char</span> ch<span style="color:#ec0000">=</span>src.<span style="color:#5f5fff">charAt</span>(i);
</span></span><span style="display:flex;"><span>                                sb.<span style="color:#5f5fff">append</span>(ch);
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">if</span>(ch <span style="color:#ec0000">==</span> <span style="color:#008900">&#39;，&#39;</span> <span style="color:#ec0000">||</span> ch <span style="color:#ec0000">==</span> <span style="color:#008900">&#39;。&#39;</span> <span style="color:#ec0000">||</span> ch <span style="color:#ec0000">==</span> <span style="color:#008900">&#39;、&#39;</span>)
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">break</span>;
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        sb.<span style="color:#5f5fff">setCharAt</span>(sb.<span style="color:#5f5fff">length</span>()<span style="color:#ec0000">-</span>1,<span style="color:#008900">&#39;。&#39;</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> sb.<span style="color:#5f5fff">toString</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">else</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> src;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">main</span>(String<span style="color:#ec0000">[]</span> args) <span style="color:#ec0000">throws</span> Exception
</span></span><span style="display:flex;"><span>        {        
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">new</span> jsph();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ImageUtil.java</p>
<div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#ec0000">package</span> jsph;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.awt.Color; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.awt.Graphics2D; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.awt.Image; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.awt.Rectangle;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.awt.image.BufferedImage; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.File; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.FileInputStream; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.FileOutputStream; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.IOException; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.net.URL;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.util.Date; 
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.util.Iterator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> javax.imageio.ImageIO;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> javax.imageio.ImageReadParam;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> javax.imageio.ImageReader;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> javax.imageio.stream.ImageInputStream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>           
</span></span><span style="display:flex;"><span>/**
</span></span><span style="display:flex;"><span> * 图片压缩工具类 提供的方法中可以设定生成的 缩略图片的大小尺寸、压缩尺寸的比例、图片的质量等
</span></span><span style="display:flex;"><span> * &lt;pre&gt;
</span></span><span style="display:flex;"><span> *  调用示例：
</span></span><span style="display:flex;"><span> * resiz(srcImg, tarDir + &#34;car_1_maxLength_11-220px-hui.jpg&#34;, 220, 0.7F);
</span></span><span style="display:flex;"><span> * &lt;/pre&gt;
</span></span><span style="display:flex;"><span> *
</span></span><span style="display:flex;"><span> * @project haohui-b2b
</span></span><span style="display:flex;"><span> * @author cevencheng
</span></span><span style="display:flex;"><span> * @create 2012-3-22 下午8:29:01
</span></span><span style="display:flex;"><span> */
</span></span><span style="display:flex;"><span><span style="color:#ec0000">public</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">ImageUtil</span>
</span></span><span style="display:flex;"><span>{ 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * * 图片文件读取
</span></span><span style="display:flex;"><span>     * 
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     * @return
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">private</span> <span style="color:#ec0000">static</span> BufferedImage <span style="color:#5f5fff">InputImage</span>(String srcImgPath) <span style="color:#ec0000">throws</span> RuntimeException
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        BufferedImage srcImage <span style="color:#ec0000">=</span> <span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        FileInputStream in <span style="color:#ec0000">=</span> <span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            // 构造BufferedImage对象 
</span></span><span style="display:flex;"><span>            File file <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> File(srcImgPath); 
</span></span><span style="display:flex;"><span>            in <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> FileInputStream(file); 
</span></span><span style="display:flex;"><span>            <span style="color:#5f5fff">byte</span><span style="color:#ec0000">[]</span> b <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> <span style="color:#5f5fff">byte</span><span style="color:#ec0000">[</span>5<span style="color:#ec0000">]</span>; 
</span></span><span style="display:flex;"><span>            in.<span style="color:#5f5fff">read</span>(b); 
</span></span><span style="display:flex;"><span>            srcImage <span style="color:#ec0000">=</span> javax.<span style="color:#5f5fff">imageio</span>.<span style="color:#5f5fff">ImageIO</span>.<span style="color:#5f5fff">read</span>(file); 
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">catch</span> (IOException e)
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            e.<span style="color:#5f5fff">printStackTrace</span>(); 
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">throw</span> <span style="color:#ec0000">new</span> RuntimeException(<span style="color:#008900">&#34;读取图片文件出错！&#34;</span>, e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span> (in <span style="color:#ec0000">!=</span> <span style="color:#ec0000">null</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    in.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">catch</span> (IOException e) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#ec0000">throw</span> <span style="color:#ec0000">new</span> RuntimeException(<span style="color:#008900">&#34;读取图片文件出错！&#34;</span>, e);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">return</span> srcImage; 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * * 将图片按照指定的图片尺寸、源图片质量压缩(默认质量为1)
</span></span><span style="display:flex;"><span>     * 
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     *            :源图片路径
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     *            :输出的压缩图片的路径
</span></span><span style="display:flex;"><span>     * @param new_w
</span></span><span style="display:flex;"><span>     *            :压缩后的图片宽
</span></span><span style="display:flex;"><span>     * @param new_h
</span></span><span style="display:flex;"><span>     *            :压缩后的图片高
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resize</span>(String srcImgPath, String outImgPath, <span style="color:#5f5fff">int</span> new_w, <span style="color:#5f5fff">int</span> new_h) 
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        // 得到图片 
</span></span><span style="display:flex;"><span>        BufferedImage src <span style="color:#ec0000">=</span> InputImage(srcImgPath); 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_w <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getWidth</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_h <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getHeight</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图长 
</span></span><span style="display:flex;"><span>        // 根据原图的大小生成空白画布 
</span></span><span style="display:flex;"><span>        BufferedImage tempImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(old_w, old_h, 
</span></span><span style="display:flex;"><span>                BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        // 在新的画布上生成原图的缩略图 
</span></span><span style="display:flex;"><span>        Graphics2D g <span style="color:#ec0000">=</span> tempImg.<span style="color:#5f5fff">createGraphics</span>(); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">setColor</span>(Color.<span style="color:#5f5fff">white</span>); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">fillRect</span>(0, 0, old_w, old_h); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">drawImage</span>(src, 0, 0, old_w, old_h, Color.<span style="color:#5f5fff">white</span>, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">dispose</span>(); 
</span></span><span style="display:flex;"><span>        BufferedImage newImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(new_w, new_h, 
</span></span><span style="display:flex;"><span>                BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        newImg.<span style="color:#5f5fff">getGraphics</span>().<span style="color:#5f5fff">drawImage</span>( tempImg.<span style="color:#5f5fff">getScaledInstance</span>(new_w, new_h, Image.<span style="color:#5f5fff">SCALE_SMOOTH</span>), 0, 0, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        // 调用方法输出图片文件 
</span></span><span style="display:flex;"><span>        outImage(outImgPath, newImg); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 将图片按照指定的尺寸比例、源图片质量压缩(默认质量为1)
</span></span><span style="display:flex;"><span>     * 
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     *            :源图片路径
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     *            :输出的压缩图片的路径
</span></span><span style="display:flex;"><span>     * @param ratio
</span></span><span style="display:flex;"><span>     *            :压缩后的图片尺寸比例
</span></span><span style="display:flex;"><span>     * @param per
</span></span><span style="display:flex;"><span>     *            :百分比
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resize</span>(String srcImgPath, String outImgPath, <span style="color:#5f5fff">float</span> ratio)
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        resize(srcImgPath, outImgPath, ratio, 1F); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 将图片按照指定长或者宽的最大值来压缩图片(默认质量为1)
</span></span><span style="display:flex;"><span>     * 
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     *            :源图片路径
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     *            :输出的压缩图片的路径
</span></span><span style="display:flex;"><span>     * @param maxLength
</span></span><span style="display:flex;"><span>     *            :长或者宽的最大值
</span></span><span style="display:flex;"><span>     * @param per
</span></span><span style="display:flex;"><span>     *            :图片质量
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resize</span>(String srcImgPath, String outImgPath, <span style="color:#5f5fff">int</span> maxLength)
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        resize(srcImgPath, outImgPath, maxLength, 1F); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * * 将图片按照指定的尺寸比例、图片质量压缩
</span></span><span style="display:flex;"><span>     * 
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     *            :源图片路径
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     *            :输出的压缩图片的路径
</span></span><span style="display:flex;"><span>     * @param ratio
</span></span><span style="display:flex;"><span>     *            :压缩后的图片尺寸比例
</span></span><span style="display:flex;"><span>     * @param per
</span></span><span style="display:flex;"><span>     *            :百分比
</span></span><span style="display:flex;"><span>     * @author cevencheng
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resize</span>(String srcImgPath, String outImgPath, 
</span></span><span style="display:flex;"><span>            <span style="color:#5f5fff">float</span> ratio, <span style="color:#5f5fff">float</span> per) { 
</span></span><span style="display:flex;"><span>        // 得到图片 
</span></span><span style="display:flex;"><span>        BufferedImage src <span style="color:#ec0000">=</span> InputImage(srcImgPath); 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_w <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getWidth</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_h <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getHeight</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图长 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> new_w <span style="color:#ec0000">=</span> 0; 
</span></span><span style="display:flex;"><span>        // 新图的宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> new_h <span style="color:#ec0000">=</span> 0; 
</span></span><span style="display:flex;"><span>        // 新图的长 
</span></span><span style="display:flex;"><span>        BufferedImage tempImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(old_w, old_h,  BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        Graphics2D g <span style="color:#ec0000">=</span> tempImg.<span style="color:#5f5fff">createGraphics</span>(); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">setColor</span>(Color.<span style="color:#5f5fff">white</span>); 
</span></span><span style="display:flex;"><span>        // 从原图上取颜色绘制新图g.fillRect(0, 0, old_w, old_h); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">drawImage</span>(src, 0, 0, old_w, old_h, Color.<span style="color:#5f5fff">white</span>, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">dispose</span>(); 
</span></span><span style="display:flex;"><span>        // 根据图片尺寸压缩比得到新图的尺寸new_w = (int) Math.round(old_w * ratio); 
</span></span><span style="display:flex;"><span>        new_h <span style="color:#ec0000">=</span> (<span style="color:#5f5fff">int</span>) Math.<span style="color:#5f5fff">round</span>(old_h <span style="color:#ec0000">*</span> ratio); 
</span></span><span style="display:flex;"><span>        BufferedImage newImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(new_w, new_h, BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        newImg.<span style="color:#5f5fff">getGraphics</span>().<span style="color:#5f5fff">drawImage</span>( tempImg.<span style="color:#5f5fff">getScaledInstance</span>(new_w, new_h, Image.<span style="color:#5f5fff">SCALE_SMOOTH</span>), 0,  0, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        // 调用方法输出图片文件OutImage(outImgPath, newImg, per); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * &lt;b&gt;
</span></span><span style="display:flex;"><span>     * 指定长或者宽的最大值来压缩图片
</span></span><span style="display:flex;"><span>     *  推荐使用此方法
</span></span><span style="display:flex;"><span>     * &lt;/b&gt;
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     *            :源图片路径
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     *            :输出的压缩图片的路径
</span></span><span style="display:flex;"><span>     * @param maxLength
</span></span><span style="display:flex;"><span>     *            :长或者宽的最大值
</span></span><span style="display:flex;"><span>     * @param per
</span></span><span style="display:flex;"><span>     *            :图片质量
</span></span><span style="display:flex;"><span>     * @author cevencheng
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resize</span>(String srcImgPath, String outImgPath,  <span style="color:#5f5fff">int</span> maxLength, <span style="color:#5f5fff">float</span> per) 
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        // 得到图片 
</span></span><span style="display:flex;"><span>        BufferedImage src <span style="color:#ec0000">=</span> InputImage(srcImgPath); 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_w <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getWidth</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_h <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getHeight</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图长 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> new_w <span style="color:#ec0000">=</span> 0; 
</span></span><span style="display:flex;"><span>        // 新图的宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> new_h <span style="color:#ec0000">=</span> 0; 
</span></span><span style="display:flex;"><span>        // 新图的长 
</span></span><span style="display:flex;"><span>        BufferedImage tempImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(old_w, old_h,  BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        Graphics2D g <span style="color:#ec0000">=</span> tempImg.<span style="color:#5f5fff">createGraphics</span>(); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">setColor</span>(Color.<span style="color:#5f5fff">white</span>); 
</span></span><span style="display:flex;"><span>        // 从原图上取颜色绘制新图 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">fillRect</span>(0, 0, old_w, old_h); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">drawImage</span>(src, 0, 0, old_w, old_h, Color.<span style="color:#5f5fff">white</span>, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">dispose</span>(); 
</span></span><span style="display:flex;"><span>        // 根据图片尺寸压缩比得到新图的尺寸 
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">if</span> (old_w <span style="color:#ec0000">&gt;</span> old_h) 
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            // 图片要缩放的比例 
</span></span><span style="display:flex;"><span>            new_w <span style="color:#ec0000">=</span> maxLength; 
</span></span><span style="display:flex;"><span>            new_h <span style="color:#ec0000">=</span> (<span style="color:#5f5fff">int</span>) Math.<span style="color:#5f5fff">round</span>(old_h <span style="color:#ec0000">*</span> ((<span style="color:#5f5fff">float</span>) maxLength <span style="color:#ec0000">/</span> old_w)); 
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">else</span>
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            new_w <span style="color:#ec0000">=</span> (<span style="color:#5f5fff">int</span>) Math.<span style="color:#5f5fff">round</span>(old_w <span style="color:#ec0000">*</span> ((<span style="color:#5f5fff">float</span>) maxLength <span style="color:#ec0000">/</span> old_h)); 
</span></span><span style="display:flex;"><span>            new_h <span style="color:#ec0000">=</span> maxLength; 
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        BufferedImage newImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(new_w, new_h, BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        newImg.<span style="color:#5f5fff">getGraphics</span>().<span style="color:#5f5fff">drawImage</span>(  tempImg.<span style="color:#5f5fff">getScaledInstance</span>(new_w, new_h, Image.<span style="color:#5f5fff">SCALE_SMOOTH</span>), 0, 0, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        // 调用方法输出图片文件 
</span></span><span style="display:flex;"><span>        outImage(outImgPath, newImg); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 将图片压缩成指定宽度， 高度等比例缩放
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param srcImgPath
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     * @param width
</span></span><span style="display:flex;"><span>     * @param per
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resizeFixedWidth</span>(String srcImgPath, String outImgPath, <span style="color:#5f5fff">int</span> width, <span style="color:#5f5fff">float</span> per)
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        // 得到图片 
</span></span><span style="display:flex;"><span>        BufferedImage src <span style="color:#ec0000">=</span> InputImage(srcImgPath); 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_w <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getWidth</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> old_h <span style="color:#ec0000">=</span> src.<span style="color:#5f5fff">getHeight</span>(); 
</span></span><span style="display:flex;"><span>        // 得到源图长 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> new_w <span style="color:#ec0000">=</span> 0; 
</span></span><span style="display:flex;"><span>        // 新图的宽 
</span></span><span style="display:flex;"><span>        <span style="color:#5f5fff">int</span> new_h <span style="color:#ec0000">=</span> 0; 
</span></span><span style="display:flex;"><span>        // 新图的长 
</span></span><span style="display:flex;"><span>        BufferedImage tempImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(old_w, old_h, BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        Graphics2D g <span style="color:#ec0000">=</span> tempImg.<span style="color:#5f5fff">createGraphics</span>(); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">setColor</span>(Color.<span style="color:#5f5fff">white</span>); 
</span></span><span style="display:flex;"><span>        // 从原图上取颜色绘制新图 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">fillRect</span>(0, 0, old_w, old_h); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">drawImage</span>(src, 0, 0, old_w, old_h, Color.<span style="color:#5f5fff">white</span>, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        g.<span style="color:#5f5fff">dispose</span>(); 
</span></span><span style="display:flex;"><span>        // 根据图片尺寸压缩比得到新图的尺寸 
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">if</span> (old_w <span style="color:#ec0000">&gt;</span> old_h) 
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            // 图片要缩放的比例 
</span></span><span style="display:flex;"><span>            new_w <span style="color:#ec0000">=</span> width; 
</span></span><span style="display:flex;"><span>            new_h <span style="color:#ec0000">=</span> (<span style="color:#5f5fff">int</span>) Math.<span style="color:#5f5fff">round</span>(old_h <span style="color:#ec0000">*</span> ((<span style="color:#5f5fff">float</span>) width <span style="color:#ec0000">/</span> old_w)); 
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">else</span>
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            new_w <span style="color:#ec0000">=</span> (<span style="color:#5f5fff">int</span>) Math.<span style="color:#5f5fff">round</span>(old_w <span style="color:#ec0000">*</span> ((<span style="color:#5f5fff">float</span>) width <span style="color:#ec0000">/</span> old_h)); 
</span></span><span style="display:flex;"><span>            new_h <span style="color:#ec0000">=</span> width; 
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        BufferedImage newImg <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> BufferedImage(new_w, new_h, BufferedImage.<span style="color:#5f5fff">TYPE_INT_RGB</span>); 
</span></span><span style="display:flex;"><span>        newImg.<span style="color:#5f5fff">getGraphics</span>().<span style="color:#5f5fff">drawImage</span>(  tempImg.<span style="color:#5f5fff">getScaledInstance</span>(new_w, new_h, Image.<span style="color:#5f5fff">SCALE_SMOOTH</span>), 0,  0, <span style="color:#ec0000">null</span>); 
</span></span><span style="display:flex;"><span>        // 调用方法输出图片文件 
</span></span><span style="display:flex;"><span>        outImage(outImgPath, newImg); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * * 将图片文件输出到指定的路径，并可设定压缩质量
</span></span><span style="display:flex;"><span>     * 
</span></span><span style="display:flex;"><span>     * @param outImgPath
</span></span><span style="display:flex;"><span>     * @param newImg
</span></span><span style="display:flex;"><span>     * @param per
</span></span><span style="display:flex;"><span>     * @author cevencheng
</span></span><span style="display:flex;"><span>     */ 
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">private</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">outImage</span>(String outImgPath, BufferedImage newImg) 
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        // 判断输出的文件夹路径是否存在，不存在则创建 
</span></span><span style="display:flex;"><span>        File file <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> File(outImgPath); 
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">if</span> (<span style="color:#ec0000">!</span>file.<span style="color:#5f5fff">exists</span>()) 
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>            file.<span style="color:#5f5fff">mkdirs</span>(); 
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>        { 
</span></span><span style="display:flex;"><span>                String formatName<span style="color:#ec0000">=</span>outImgPath.<span style="color:#5f5fff">substring</span>(outImgPath.<span style="color:#5f5fff">lastIndexOf</span>(<span style="color:#008900">&#39;.&#39;</span>)<span style="color:#ec0000">+</span>1);
</span></span><span style="display:flex;"><span>                ImageIO.<span style="color:#5f5fff">write</span>(newImg, formatName, <span style="color:#ec0000">new</span> File(outImgPath));
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">catch</span> (Exception e) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">throw</span> <span style="color:#ec0000">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 图片剪切工具方法
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param srcfile 源图片
</span></span><span style="display:flex;"><span>     * @param outfile 剪切之后的图片
</span></span><span style="display:flex;"><span>     * @param x 剪切顶点 X 坐标
</span></span><span style="display:flex;"><span>     * @param y 剪切顶点 Y 坐标
</span></span><span style="display:flex;"><span>     * @param width 剪切区域宽度
</span></span><span style="display:flex;"><span>     * @param height 剪切区域高度
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @throws IOException
</span></span><span style="display:flex;"><span>     * @author cevencheng
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">cut</span>(File srcfile, File outfile, <span style="color:#5f5fff">int</span> x, <span style="color:#5f5fff">int</span> y, <span style="color:#5f5fff">int</span> width, <span style="color:#5f5fff">int</span> height) <span style="color:#ec0000">throws</span> IOException
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        FileInputStream is <span style="color:#ec0000">=</span> <span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        ImageInputStream iis <span style="color:#ec0000">=</span> <span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            // 读取图片文件
</span></span><span style="display:flex;"><span>            is <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> FileInputStream(srcfile);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            /*
</span></span><span style="display:flex;"><span>             * 返回包含所有当前已注册 ImageReader 的 Iterator，这些 ImageReader 声称能够解码指定格式。
</span></span><span style="display:flex;"><span>             * 参数：formatName - 包含非正式格式名称 .（例如 &#34;jpeg&#34; 或 &#34;tiff&#34;）等 。
</span></span><span style="display:flex;"><span>             */
</span></span><span style="display:flex;"><span>            Iterator<span style="color:#ec0000">&lt;</span>ImageReader<span style="color:#ec0000">&gt;</span> it <span style="color:#ec0000">=</span> ImageIO.<span style="color:#5f5fff">getImageReadersByFormatName</span>(<span style="color:#008900">&#34;jpg&#34;</span>);
</span></span><span style="display:flex;"><span>            ImageReader reader <span style="color:#ec0000">=</span> it.<span style="color:#5f5fff">next</span>();
</span></span><span style="display:flex;"><span>            // 获取图片流
</span></span><span style="display:flex;"><span>            iis <span style="color:#ec0000">=</span> ImageIO.<span style="color:#5f5fff">createImageInputStream</span>(is);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            /*
</span></span><span style="display:flex;"><span>             * &lt;p&gt;iis:读取源.true:只向前搜索 &lt;/p&gt;.将它标记为 ‘只向前搜索’。
</span></span><span style="display:flex;"><span>             * 此设置意味着包含在输入源中的图像将只按顺序读取，可能允许 reader 避免缓存包含与以前已经读取的图像关联的数据的那些输入部分。
</span></span><span style="display:flex;"><span>             */
</span></span><span style="display:flex;"><span>            reader.<span style="color:#5f5fff">setInput</span>(iis, <span style="color:#ec0000">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            /*
</span></span><span style="display:flex;"><span>             * &lt;p&gt;描述如何对流进行解码的类&lt;p&gt;.用于指定如何在输入时从 Java Image I/O
</span></span><span style="display:flex;"><span>             * 框架的上下文中的流转换一幅图像或一组图像。用于特定图像格式的插件 将从其 ImageReader 实现的
</span></span><span style="display:flex;"><span>             * getDefaultReadParam 方法中返回 ImageReadParam 的实例。
</span></span><span style="display:flex;"><span>             */
</span></span><span style="display:flex;"><span>            ImageReadParam param <span style="color:#ec0000">=</span> reader.<span style="color:#5f5fff">getDefaultReadParam</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            /*
</span></span><span style="display:flex;"><span>             * 图片裁剪区域。Rectangle 指定了坐标空间中的一个区域，通过 Rectangle 对象
</span></span><span style="display:flex;"><span>             * 的左上顶点的坐标（x，y）、宽度和高度可以定义这个区域。
</span></span><span style="display:flex;"><span>             */
</span></span><span style="display:flex;"><span>            Rectangle rect <span style="color:#ec0000">=</span> <span style="color:#ec0000">new</span> Rectangle(x, y, width, height);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            // 提供一个 BufferedImage，将其用作解码像素数据的目标。
</span></span><span style="display:flex;"><span>            param.<span style="color:#5f5fff">setSourceRegion</span>(rect);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            /*
</span></span><span style="display:flex;"><span>             * 使用所提供的 ImageReadParam 读取通过索引 imageIndex 指定的对象，并将 它作为一个完整的
</span></span><span style="display:flex;"><span>             * BufferedImage 返回。
</span></span><span style="display:flex;"><span>             */
</span></span><span style="display:flex;"><span>            BufferedImage bi <span style="color:#ec0000">=</span> reader.<span style="color:#5f5fff">read</span>(0, param);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            // 保存新图片
</span></span><span style="display:flex;"><span>            ImageIO.<span style="color:#5f5fff">write</span>(bi, <span style="color:#008900">&#34;jpg&#34;</span>, outfile);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span> (is <span style="color:#ec0000">!=</span> <span style="color:#ec0000">null</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                is.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#ec0000">if</span> (iis <span style="color:#ec0000">!=</span> <span style="color:#ec0000">null</span>) 
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                iis.<span style="color:#5f5fff">close</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">main</span>(String args<span style="color:#ec0000">[]</span>) <span style="color:#ec0000">throws</span> Exception 
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        String srcImg <span style="color:#ec0000">=</span> <span style="color:#008900">&#34;j:/branch.jpg&#34;</span>; 
</span></span><span style="display:flex;"><span>        resize(srcImg, srcImg, 200,200); 
</span></span><span style="display:flex;"><span>        resize(srcImg, <span style="color:#008900">&#34;111222.jpg&#34;</span>, 200,200); 
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="医院数据展示">医院数据展示</h2>
<div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span><span style="display:flex;"><span>&lt;!DOCTYPE html PUBLIC &#34;-//WAPFORUM//DTD XHTML Mobile 1.0//EN&#34;&#34;http://www.wapforum.org/DTD/xhtml-mobile10.dtd&#34;&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">html</span> <span style="color:#5f5fff">xmlns</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;http://www.w3.org/1999/xhtml&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">head</span>&gt;&lt;<span style="color:#ec0000">style</span> <span style="color:#5f5fff">type</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;text/css&#34;</span>&gt;<span style="color:#ec0000">body</span>{<span style="color:#ec0000">font-size</span>:<span style="color:#ec0000">medium</span>;<span style="color:#ec0000">line-height</span>:<span style="color:#008900">1.5</span><span style="color:#5f5fff">em</span>;<span style="color:#ec0000">text-align</span>:<span style="color:#ec0000">left</span>}&lt;/<span style="color:#ec0000">style</span>&gt;&lt;<span style="color:#ec0000">title</span>&gt;HLA实验室&lt;/<span style="color:#ec0000">title</span>&gt;&lt;/<span style="color:#ec0000">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ec0000">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#ec0000">span</span> <span style="color:#5f5fff">style</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;font-size: 20px&#34;</span>&gt;本&lt;/<span style="color:#ec0000">span</span>&gt;室是集医教研为一体的高新技术实验室，是中华骨髓库专家委员会委员单位，承担中华骨髓库江苏省分库的造血干细胞捐献志愿者HLA基因分型、临床造血干细胞移植和器官移植HLA组织配型及临床风险预测和相关医疗教学科研工作。该实验室2002年12月通过国家红十字总会组织的专家鉴定和认证，成为中华骨髓库定点组织配型实验室，并接受中华骨髓库常规及不定时、即时质控，且多年保持零错误率。
</span></span><span style="display:flex;"><span>    十年来，本室已对近50，000名造血干细胞捐献志愿者进行了HLA分型，建立了HLA分型档案和与中华骨髓库双向联动的功能性资料库，为国内外白血病患者寻找HLA完全匹配的非血缘关系的造血干细胞供者，其中已有142例在我院实施了造血干细胞采集。已从汉族人群中发现4个新等位基因，均获得WHO认证。
</span></span><span style="display:flex;"><span>    此外，本室已为院内外、省内外的临床3000多例亲缘关系、非亲缘关系供患者进行了HLA低分辨和高分辨配型。近年来，本实验室立足于规范化精细建设原则，在转换医学和医学科研上开拓特色，已进行疾病与HLA基因发病之间的研究工作，许多科研成果并已应用于临床。同时，该实验室还运用遗传流行病学和遗传免疫学手段，探索性进行地理遗传学比对和分析工作，为更多、更有效的寻找、确立移植供者提供依据，这一切均确立了本室在国内HLA科教研中的特色和地位。
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ec0000">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ec0000">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ec0000">html</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span><span style="display:flex;"><span>&lt;!DOCTYPE html PUBLIC &#34;-//WAPFORUM//DTD XHTML Mobile 1.0//EN&#34;&#34;http://www.wapforum.org/DTD/xhtml-mobile10.dtd&#34;&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">html</span> <span style="color:#5f5fff">xmlns</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;http://www.w3.org/1999/xhtml&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">head</span>&gt;&lt;<span style="color:#ec0000">style</span> <span style="color:#5f5fff">type</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;text/css&#34;</span>&gt;<span style="color:#ec0000">body</span>{<span style="color:#ec0000">font-size</span>:<span style="color:#ec0000">medium</span>;<span style="color:#ec0000">line-height</span>:<span style="color:#008900">1.5</span><span style="color:#5f5fff">em</span>;<span style="color:#ec0000">text-align</span>:<span style="color:#ec0000">left</span>}&lt;/<span style="color:#ec0000">style</span>&gt;&lt;<span style="color:#ec0000">title</span>&gt;包丽华&lt;/<span style="color:#ec0000">title</span>&gt;&lt;/<span style="color:#ec0000">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#ec0000">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#ec0000">table</span> <span style="color:#5f5fff">border</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;0&#34;</span> <span style="color:#5f5fff">cellspacing</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;3&#34;</span> <span style="color:#5f5fff">cellpadding</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;0&#34;</span> <span style="color:#5f5fff">style</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;border:#e1e1e1 1px solid&#34;</span>&gt; 
</span></span><span style="display:flex;"><span> &lt;<span style="color:#ec0000">tbody</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#ec0000">tr</span>&gt; 
</span></span><span style="display:flex;"><span>   &lt;<span style="color:#ec0000">td</span>&gt;&lt;<span style="color:#ec0000">img</span> <span style="color:#5f5fff">src</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;picture/0/1202221805195706215.JPG&#34;</span> <span style="color:#5f5fff">width</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;89&#34;</span> <span style="color:#5f5fff">height</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;118&#34;</span> <span style="color:#5f5fff">border</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;0&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;!--&lt;IMG src=&#39;picture/0/ystp.gif&#39; width=89 height=118 border=0&gt;--&gt;&lt;/<span style="color:#ec0000">td</span>&gt; 
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#ec0000">tr</span>&gt; 
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#ec0000">tbody</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ec0000">table</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ec0000">a</span> <span style="color:#5f5fff">href</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;/art/2010/3/10/art_1379_464.html&#34;</span> <span style="color:#5f5fff">style</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34; color:#0163ae; font-size: 14px; text-decoration:none; font-weight: bold;&#34;</span>&gt;包丽华&lt;/<span style="color:#ec0000">a</span>&gt;&lt;<span style="color:#ec0000">br</span> /&gt;&lt;<span style="color:#ec0000">a</span> <span style="color:#5f5fff">style</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;color:#393c3c; font-size: 12px; text-decoration:none;&#34;</span>&gt;主任医师 副教授&lt;/<span style="color:#ec0000">a</span>&gt;&lt;<span style="color:#ec0000">br</span> /&gt;&lt;<span style="color:#ec0000">a</span> <span style="color:#5f5fff">style</span><span style="color:#ec0000">=</span><span style="color:#008900">&#34;color:#393c3c; font-size: 12px; text-decoration:none;&#34;</span>&gt;主任医师，副教授，硕士生导师，核医学科负责人，江苏省人民医院影像学部副主任，南京市医学会骨质疏松骨矿盐学会副主任委员，江苏省医学会骨质疏松学会委员。1985年毕业于南京医科大学医学系，从事临床医疗、教学及科研26年，擅长骨代谢疾病、骨质疏松及骨关节炎等疾病的诊断、预防和治疗。在SCI及核心期刊发表相关论著数十篇，参编专著多部，并多次获省、市科研奖项，主持或参与国家、省、市及院级骨质疏松课题多项，主持并参与十余项骨质疏松临床药物试验。专家门诊时间：每周二上午、周四上午、周五上午。&lt;/<span style="color:#ec0000">a</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#ec0000">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ec0000">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#ec0000">html</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">&lt;doctors&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>孔祥清<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            教授，主任医师，医学博士，博士生导师现任南京医科大学第一临床医学院院长、第一附属医院心内科主任。同时兼任FSCAI、中国生物医学工程学会介入医学工程分会副主任委员、中华医学会心血管病分会青年委员、中华医学会心血管病分会结构心脏病学组成员、中国医师协会结构心脏病学组副组长、中华医学会江苏心血管病分会副主任委员。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>孔祥清.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212326363771202.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>孔祥清.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>曹克将<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、教授、博士生导师南京医科大学（心血管病）国家重点学科带头人，现任中华医学会心电生理与起搏分会副主任委员、江苏省医学会心血管病专科分会主任委员、江苏省心肺疾病研究所所长、江苏省心血管病临床医学中心主任。
</span></span><span style="display:flex;"><span>            学科在2007年成为国家重点学科，2010年带领学科获卫生部心律失常、冠心病与先心病介入培训基地。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>曹克将.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_s1203151656599155853.jpg<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>曹克将.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>黄峻<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师享受国务院特殊津贴，主任医师、教授。擅长高血压、冠心病、心律失常及各类疑难危重心脏疾病的诊治。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>黄峻.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212325460412557.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>黄峻.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>黄元铸<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师、教授，博导，院终身教授。擅长心脏病尤其冠心病、心律失常与疑难心脏病诊治。每周四上午专家门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>黄元铸.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_ystp.gif<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>黄元铸.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>马文珠<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师、教授，院终身教授。擅长心脏病尤其冠心病、心肌病的诊治。每周三上午专家门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>马文珠.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_ystp.gif<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>马文珠.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>杨志健<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、教授主持多项国家级和省部级课题，主要研究方向是冠心病的早期诊断和生物学治疗，以第一作者或通讯作者发表SCI论文20余篇，正主持开展基因治疗二期临床工作；并主持搭建“冠心病专家远程医疗系统”平台，带动江苏省及邻近省份冠心病介入诊疗技术的快速发展。获江苏省优秀科技工作者等荣誉称号。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>杨志健.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212326539421951.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>杨志健.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>李新立<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、教授中华医学会心血管病分会心衰学组委员兼秘书、中国高血压联盟常委、中国医师协会高血压专业委员会常委、中国医师协会中西医结合医师分会心血管专家委员会常委。获得江苏省科学技术进步奖二等奖、江苏省突出贡献中青年专家。目前主持“十二五”国家科技支撑计划、国家自然科学基金。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>李新立.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202271011315479273.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>李新立.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>单其俊<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>医学博士，主任医师，教授。擅长各类心脏病的诊治，尤其是心律失常的介入诊治及心脏电生理与起搏治疗。每周四下午专家门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>单其俊.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212327218808376.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>单其俊.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>许迪<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师医学博士，主任医师、教授。擅长各类心脏病的诊治，尤其是心脏超声的临床应用、心脏电生理与起搏及先天性心脏病的诊治。每周一下午专家门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>许迪.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202270926526234565.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>许迪.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>邹建刚<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师、教授现任江苏省人民医院、南京医科大学第一附属医院心脏科教授、主任医师，博士研究生导师，心律失常专业组副主任；中华医学会心电生理与起搏学会委员，中国CRT工作组副组长。
</span></span><span style="display:flex;"><span>            江苏省医学重点人才；省首批中青年科学技术带头人；省“六大人才高峰”高层次人才；2010年获中国CRT杰出成就奖。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>邹建刚.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_ystp.gif<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>邹建刚.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>陈明龙<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、教授主任医师，教授，博士生导师。现任南京医科大学一附院心内科副主任，中华医学会心电生理与起搏分会委员，中国心律学会委员，江苏省心血管病学会秘书。擅长心血管内科相关疾病尤其是心律失常的诊治。曾荣获江苏省科学技术进步奖二等奖1项、江苏省医学新技术引进奖一等奖3项、江苏省卫生厅新技术引进特等奖1项。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>陈明龙.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_s1203221028183788908.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>陈明龙.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>朱铁兵<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师医学博士，主任医师、教授。擅长各类心脏病的诊治，尤其擅长冠心病的介入治疗。每周三上午专家门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>朱铁兵.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202271021234004728.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>朱铁兵.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>张寄南<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师主任医师、教授。享受国务院特殊津贴。擅长病毒性心肌炎、心肌病、高血压、心肌梗塞及心脏疑难疾病的诊治。 每周五上午专家门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>张寄南.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_ystp.gif<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>张寄南.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>张馥敏<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师主任医师、教授。擅长冠心病、心律失常及各类疑难危重心脏疾病及心衰的诊治。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>张馥敏.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_ystp.gif<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>张馥敏.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>钱卫冲<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师主任医师，副教授。能诊断处理各种常见心血管病，擅长对高血压病、冠心病及心力衰竭的诊断、治疗及综合管理。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>钱卫冲.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202271027314514069.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>钱卫冲.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>李殿富<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师医学博士，主任医师，副教授。擅长各类心脏病的诊治，尤其擅长冠心病介入技术和无创技术（核素心肌显像），对冠心病和胸痛的规范化诊治有丰富经验。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>李殿富.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212329319829385.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>李殿富.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>周秀娟<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师医学博士，主任医师，副教授，硕士生导师，长期从事临床一线工作，熟练掌握心脏科各种常见病的诊断和治疗，尤其是高血压、冠心病、心肌病、心律失常的临床诊治，擅长心脏起搏器植入术及术后程控随访，对遗传性心律失常，如致心律失常右室心肌病有较深入研究，主持国家自然科学基金。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>周秀娟.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1311151216574162069.jpg<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>周秀娟.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>王连生<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、教授南京医科大学第一附属医院(江苏省人民医院)内科心血管病主任医师、教授、高级专家，博士研究生导师和卫生部心血管疾病介入诊疗培训基地“冠心病介入”导师，医学博士，留美学者。长期从事冠心病、高血压、高脂血症和心力衰竭的临床诊疗工作，精通各种心血管常见病与疑难危重病人的诊疗。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>王连生.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202271029068548435.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>王连生.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>李春坚<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>主任医师、教授、博士生导师主任医师、教授、博士生导师
</span></span><span style="display:flex;"><span>            德国Heidelberg大学和加拿大McMaster大学访问学者；江苏省六大高峰人才；江苏省333高层次人才；江苏省医学重点人才（共建）； International Journal of
</span></span><span style="display:flex;"><span>            Cardiology (SCI IF 5.509)同行评审专家。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>李春坚.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202271030294711124.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>李春坚.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>杨 荣<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、副教授主任医师、副教授。从事心脏病临床诊治工作，擅长先心病的临床诊治，尤其擅长先心病的介入诊治，中国先心病介入培训基地导师，在国内外医学期刊发表文章30余篇，获省、厅和院级医学奖8项。
</span></span><span style="display:flex;"><span>            每周四上午门诊。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>杨 荣.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212330028289166.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>杨 荣.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>卢新政<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>副主任医师医学博士后，副主任医师，副教授。擅长各类心脏病的诊治，尤其是高血压病、心力衰竭、心肌病等的临床诊治。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>卢新政.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212330345274772.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>卢新政.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>王 晖<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>副主任医师医学博士，副主任医师、副教授。熟练掌握各种危重心血管病的临床诊治，擅长冠心病介入诊治。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>王 晖.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_ystp.gif<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>王 晖.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;doctor&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>杨 兵<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            主任医师、教授医学博士，主任医师、教授。熟练掌握心内科常见病和多发病的诊治，主要从事心律失常的临床和基础研究，擅长于起搏治疗缓慢性心律失常和导管射频消融治疗各种快速性心律失常，特别在应用新型三维标测系统治疗各种复杂快速性心律失常，如心房颤动、房性心动过速、心房扑动、室性心动过速等方面有丰富的经验。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>杨 兵.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;smallpicurl&gt;</span>picture/0/small_1202212332098006091.JPG<span style="color:#ec0000">&lt;/smallpicurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;usefulinfourl&gt;</span>杨 兵.xml<span style="color:#ec0000">&lt;/usefulinfourl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/doctor&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">&lt;/doctors&gt;</span>
</span></span></code></pre></div><p>重点专科</p>
<div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">&lt;keshis&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>外科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>老年病学科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;</span>13<span style="color:#ec0000">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>康复医学科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            江苏省人民医院康复医学科成立于1956年，55年来学科发展迅速，目前已成立了康复医学中心。现有康复门诊800平方米，病房76张床位、盛泽分院康复医学科22张床位，江苏省人民医院康复医学分院是国内三级甲等医院中临床规模最大、设备最齐全、技术实力最强的科室之一
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>康复医学科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;</span>37<span style="color:#ec0000">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>妇产科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>儿科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;</span>28<span style="color:#ec0000">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>门急诊<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>医技<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;isroot&gt;</span>true<span style="color:#ec0000">&lt;/isroot&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>心血管内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????南京医科大学心血管内科创建于1952年，1981年和1986年分别被批准为硕士学位和博士学位授权点，1998年被授予临床医学博士后科研流动站。江苏省政府重点学科、江苏省心血管病临床医学中心，2007被评为国家重点学科。[详细内容]
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>心血管内科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>呼吸内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????现为江苏省医学重点学科、江苏省临床重点专科、江苏省“呼吸内科专业医疗质量控制中心”、江苏省卫生厅“135工程”重点学科、“科教兴卫工程”重点学科、国家首批“临床药理研究基地”、卫生部“专科医师规范化培训基地”、卫生部首批“呼吸内镜诊疗技术培训基地”。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>呼吸内科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>内分泌科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????1986年被国家教委批准为内分泌专业博士授予点，1996年被江苏省卫生厅批准为重点学科，1998年成为国家医学继续教育基地和国家药品临床验证机构。课题方面，近3年来承担重大课题3项、国际合作项目1项、国家自然科学基金14项，其他省部级课题17项，科技重大专项基金3项。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>内分泌科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>血液内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>????南京医科大学第一附属医院（江苏省人民医院）血液科简介
</span></span><span style="display:flex;"><span>            南京医科大学第一附属医院（江苏省人民医院）血液科是国家临床重点专科建设单位、江苏省优势学科（临床医学）、江苏省重点学科（内科）、江苏省兴卫工程重点学科（共建）、江苏省临床重点专科、江苏省高校优秀科技创新团队。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>血液内科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>消化内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>????江苏省人民医院消化科是江苏省“135”和“兴卫工程”医学重点学科，江苏省卫生厅重点临床专科。卫生部消化医师专科培训基地(示范点),卫生部消化内镜诊疗培训基地,卫生部内镜消毒灭菌培训基地.
</span></span><span style="display:flex;"><span>            自上世纪60 年代创建以来，学科建设蓬勃发展，规模逐步扩大。现有消化门诊（专科和专家门诊）。<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>消化内科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>肾内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????本学科为我国最早建立肾脏病专科和血液透析中心的单位之一。现已成为拥有一个达全国一流、国际先进水平的血液净化中心，及相应规模病房的学术专科。是南京医科大学博士、硕士授予点，江苏省教委重点学科、江苏省重点专科，卫生部专科医师培训基地，国家临床药物试验机构。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>肾内科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>神经内科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????南京医科大学附属第一医院神经内科现由二个病区（70张床）、门诊、急诊、神经电生理实验室和临床神经病学研究室（脑脊液细胞研究室）所构成。每年收容各类神经系统疑难危重病人1000人次，门诊诊治7万多人次，急诊抢救近1万人次。本学科在神经系统各类疾病的诊治方面有着丰富的临床经验。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>神经内科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>风湿免疫科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????江苏省人民医院风湿科1992年成立，2009年获江苏省风湿病学临床重点专科，是南京医科大学临床风湿免疫硕士学位授予点，从属的大内科是内科学博士学位授予点及内科博士后流动站。目前有独立的专科实验室以及每日开诊的专家、专科门诊。本专科实验室及临床免疫实验室设备先进。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>风湿免疫科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>感染病科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????在著名热带病学家许本谦教授和陈钟英、贾辅忠、王明秀、唐保元、黄祖瑚、李军等历届科主任的带领下，经过数十年的艰苦努力，在常见重大传染性疾病的诊断治疗、临床教学、科研工作、人才培养和学科建设等方面取得了显著成绩。今天的感染病科设施优良，宽敞明亮的门诊大厅。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>感染病科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>肿瘤科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????江苏省人民医院肿瘤科为江苏省人民医院重点发展科室之一，科室研究室为江苏省135重点实验室之一。曾获江苏省“十一五”肿瘤重点学科，是江苏省“兴卫工程”高技术平台培育点之一，卫生部“高强度聚焦超声技术治疗肿瘤综合评价”培育点之一。科室自1999年底成立。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>肿瘤科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>皮肤科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>????江苏省人民医院皮肤科始建于1948年，历史悠久,技术精良,
</span></span><span style="display:flex;"><span>            是江苏省内综合医院中学术规模最大、综合实力最强的皮肤病专业诊疗机构，专业治疗各种皮肤病和性病。我科为国务院首批博士点授予点，目前为江苏省重点学科、博士后流动站，是国家卫生部皮肤性病学科药理基地。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>皮肤科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>普通内科（全科医学）<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>????[详细内容]<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>普通内科（全科医学）.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>河西综合内科（心血管）<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>????[详细内容]<span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>河西综合内科（心血管）.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>麻醉手术科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????江苏省人民医院（南京医科大学第一附属医院）麻醉科是江苏省重点临床专科，江苏省“135”医学重点共建学科。江苏省人民医院麻醉科专科特色鲜明，尤其是危、重、疑、难、杂病人的麻醉、器官移植病人的麻醉，在麻醉与内分泌、药物对支气管平滑肌张力的影响等方面在国内具有一定的影响。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>麻醉手术科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>ICU<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????监护病房筹建于1983年8月，于1984年9月28日正式接受病人，设床位6张，是国内最早成立的ICU之一。1985年2月，时任院长林桂芳兼任科主任，同年5月，奚云清任科副主任，并聘请王一镗教授和李德馨主任为顾问。1990年徐鑫荣任科主任。经过20年的发展。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>ICU.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;keshi&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;name&gt;</span>骨科<span style="color:#ec0000">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;id&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>            ????南京医科大学第一附属医院（江苏省人民医院）骨科是江苏省“135”工程重点学科，博士、硕士学位授予点、博士后流动站，含3个病区105张床位；共有医护人员84名，其中医生37名，技师3名，护理人员44名；拥有教授、主任医师10人，副教授、副主任医师11人。
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">&lt;detailurl&gt;</span>骨科.htm<span style="color:#ec0000">&lt;/detailurl&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ec0000">&lt;/keshi&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">&lt;/keshis&gt;</span>
</span></span></code></pre></div><h2 id="爬取疾病数据">爬取疾病数据</h2>
<p>  做这个源于一个想法，比如你要查头痛，会列出所有可能导致头痛的疾病和该疾病其他症状，网上是不存在专业医学数据库这种东西的，因此需要自己从其他医学网站爬得，做到手机app中，并利用jsp网站进行大型数据库的查询是非常好的方法，输入一个词，可以搜索出医生/科室/位置/疾病/症状/相似信息。为了达到这个目的，必须有自己的医学数据库，而合作的医院并没提供，因此先自己实验一下了。现在的数据库已有180M，收录15000条内容</p>
<div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#ec0000">package</span> symptom;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.util.LinkedList;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.util.Queue;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.Jsoup;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Document;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Element;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.select.Elements;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> SQLite.Database;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> SQLite.Exception;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">public</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">zzkfamilydoctorcomcn</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">final</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">int</span> SYMPTOM<span style="color:#ec0000">=</span>0;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">final</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">int</span> DISEASE<span style="color:#ec0000">=</span>1;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">int</span> threadnum<span style="color:#ec0000">=</span>32;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> Queue<span style="color:#ec0000">&lt;</span>ELE<span style="color:#ec0000">&gt;</span> dataQueue<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> LinkedList<span style="color:#ec0000">&lt;</span>ELE<span style="color:#ec0000">&gt;</span>();//症状队列
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> Database db<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">ELE</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">ELE</span>(String url,<span style="color:#5f5fff">int</span> type)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">url</span><span style="color:#ec0000">=</span>url;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">type</span><span style="color:#ec0000">=</span>type;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                /**数据库格式
</span></span><span style="display:flex;"><span>                 *         Name                症状/疾病名
</span></span><span style="display:flex;"><span>                        Id                        全局唯一标识
</span></span><span style="display:flex;"><span>                        IsSymptom        症状/疾病？
</span></span><span style="display:flex;"><span>                        BodyPart        身体部位                ----症状        头:眼睛
</span></span><span style="display:flex;"><span>                        Keshi                挂号科室                ----疾病        内科:男科
</span></span><span style="display:flex;"><span>                        Description        概述                        
</span></span><span style="display:flex;"><span>                        DDescription详述
</span></span><span style="display:flex;"><span>                        WithSymptom        伴随症状                ----疾病对应症状简述，逗号隔开
</span></span><span style="display:flex;"><span>                        WithDSymptom详细症状                ----疾病对应症状详述
</span></span><span style="display:flex;"><span>                        PossibleIll        相关疾病                ----症状可能疾病，大项逗号隔开，小项冒号隔开 疾病:科室:伴随症状
</span></span><span style="display:flex;"><span>                        Pathogeny        病因                        
</span></span><span style="display:flex;"><span>                        Check                检查
</span></span><span style="display:flex;"><span>                        Diagnosis        诊断鉴别
</span></span><span style="display:flex;"><span>                        Popularity        疾病/症状 搜索热度
</span></span><span style="display:flex;"><span>                 * 
</span></span><span style="display:flex;"><span>                 */
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getName</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> name;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setName</span>(String name) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">name</span> <span style="color:#ec0000">=</span> name;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getUrl</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> url;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setUrl</span>(String url) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">url</span> <span style="color:#ec0000">=</span> url;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">int</span> <span style="color:#5f5fff">getType</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> type;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setType</span>(<span style="color:#5f5fff">int</span> type) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">type</span> <span style="color:#ec0000">=</span> type;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getBodypart</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> bodypart;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setBodypart</span>(String bodypart) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">bodypart</span> <span style="color:#ec0000">=</span> bodypart;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setwithsymptom</span>(String withsymptom)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">withsymptom</span><span style="color:#ec0000">=</span>withsymptom;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getwithsymptom</span>()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">withsymptom</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String name<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//症状名
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String url<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//数据地址
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> <span style="color:#5f5fff">int</span> type<span style="color:#ec0000">=</span>SYMPTOM;//疾病还是症状
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String bodypart<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//身体部位        头:眼睛
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String withsymptom<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String keshi<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resolve</span>()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        String description<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String ddescription<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String withdsymptom<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        StringBuilder possibleill<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>                        String pathogeny<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String check<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String diagnosis<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        threadnum<span style="color:#ec0000">--</span>;
</span></span><span style="display:flex;"><span>                        String sql<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Document doc<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        doc <span style="color:#ec0000">=</span> Jsoup.<span style="color:#5f5fff">connect</span>(url).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                } 
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">catch</span> (java.<span style="color:#5f5fff">lang</span>.<span style="color:#5f5fff">Exception</span> e) 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">return</span>;
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">if</span>(type <span style="color:#ec0000">==</span> SYMPTOM)
</span></span><span style="display:flex;"><span>                                {//如果是症状
</span></span><span style="display:flex;"><span>                                        String<span style="color:#ec0000">[]</span> dataset<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.brumbs&#34;</span>).<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">split</span>(<span style="color:#008900">&#34; &gt; &#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(dataset.<span style="color:#5f5fff">length</span> <span style="color:#ec0000">&lt;=</span> 2)
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">return</span>;
</span></span><span style="display:flex;"><span>                                        name<span style="color:#ec0000">=</span>dataset<span style="color:#ec0000">[</span>dataset.<span style="color:#5f5fff">length</span><span style="color:#ec0000">-</span>1<span style="color:#ec0000">]</span>;
</span></span><span style="display:flex;"><span>                                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(name);
</span></span><span style="display:flex;"><span>                                        bodypart<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.jzxx a&#34;</span>).<span style="color:#5f5fff">get</span>(2).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        keshi<span style="color:#ec0000">=</span>dataset<span style="color:#ec0000">[</span>dataset.<span style="color:#5f5fff">length</span><span style="color:#ec0000">-</span>2<span style="color:#ec0000">]</span>;
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.introductionTextBox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>description;
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        Elements tagnames<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.subNav a&#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element tag:tagnames)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;病因&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.module.mPathogeny div.moduleContent&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;诊断&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        diagnosis<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.module.mFeature div.moduleContent&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                        //处理相关疾病
</span></span><span style="display:flex;"><span>                                        Elements ll<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.area.aXgjb div.colMain tr&#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>ll.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                                ll.<span style="color:#5f5fff">remove</span>(0);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>ll.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">for</span>(Element ele:ll)
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        Elements temp2<span style="color:#ec0000">=</span>ele.<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(temp2.<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;:&#34;</span>);
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(temp2.<span style="color:#5f5fff">get</span>(1).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;:&#34;</span>);
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(temp2.<span style="color:#5f5fff">get</span>(2).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;,&#34;</span>);
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">if</span>(possibleill.<span style="color:#5f5fff">length</span>() <span style="color:#ec0000">&gt;=</span> 1)
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">deleteCharAt</span>(possibleill.<span style="color:#5f5fff">length</span>()<span style="color:#ec0000">-</span>1);//去掉多余的&#39;,&#39;
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>description.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>ddescription.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withsymptom<span style="color:#ec0000">=</span>withsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withdsymptom<span style="color:#ec0000">=</span>withdsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        String ill<span style="color:#ec0000">=</span>possibleill.<span style="color:#5f5fff">toString</span>().<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        pathogeny<span style="color:#ec0000">=</span>pathogeny.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        check<span style="color:#ec0000">=</span>check.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        diagnosis<span style="color:#ec0000">=</span>diagnosis.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        sql<span style="color:#ec0000">=</span><span style="color:#008900">&#34;insert into symptomdata values(&#39;&#34;</span><span style="color:#ec0000">+</span>name<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;,&#39;1&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>bodypart<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>keshi<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>description<span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        <span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ddescription<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withdsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ill<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>check<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>diagnosis<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;)&#34;</span>;
</span></span><span style="display:flex;"><span>                                        db.<span style="color:#5f5fff">exec</span>(sql,<span style="color:#ec0000">null</span>);
</span></span><span style="display:flex;"><span>                                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(name<span style="color:#ec0000">+</span><span style="color:#008900">&#34; left:&#34;</span><span style="color:#ec0000">+</span>dataQueue.<span style="color:#5f5fff">size</span>());
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(type <span style="color:#ec0000">==</span> DISEASE)
</span></span><span style="display:flex;"><span>                                {        
</span></span><span style="display:flex;"><span>                                        String<span style="color:#ec0000">[]</span> dataset<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.brumbs&#34;</span>).<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">split</span>(<span style="color:#008900">&#34; &gt; &#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(dataset.<span style="color:#5f5fff">length</span> <span style="color:#ec0000">&lt;=</span> 2)
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">return</span>;
</span></span><span style="display:flex;"><span>                                        name<span style="color:#ec0000">=</span>dataset<span style="color:#ec0000">[</span>dataset.<span style="color:#5f5fff">length</span><span style="color:#ec0000">-</span>1<span style="color:#ec0000">]</span>;
</span></span><span style="display:flex;"><span>                                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(name);
</span></span><span style="display:flex;"><span>                                        bodypart<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;span[itemprop=bodyLocation]&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        keshi<span style="color:#ec0000">=</span>dataset<span style="color:#ec0000">[</span>dataset.<span style="color:#5f5fff">length</span><span style="color:#ec0000">-</span>2<span style="color:#ec0000">]</span>;
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.introductionTextBox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>description;
</span></span><span style="display:flex;"><span>                                        Elements tagnames<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.subNav a&#34;</span>);
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element tag:tagnames)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;病因&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.module.mPathogeny div.moduleContent&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;诊断&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        diagnosis<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.module.mFeature div.moduleContent&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;症状&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        withdsymptom<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.module.mIntro.mSymptom div.moduleContent&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                                
</span></span><span style="display:flex;"><span>                                        //处理相关疾病
</span></span><span style="display:flex;"><span>                                        Elements ll<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.area.aXgjb div.colMain tr&#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>ll.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                                ll.<span style="color:#5f5fff">remove</span>(0);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>ll.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">for</span>(Element ele:ll)
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        Elements temp2<span style="color:#ec0000">=</span>ele.<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(temp2.<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;:&#34;</span>);
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(temp2.<span style="color:#5f5fff">get</span>(1).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;:&#34;</span>);
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(temp2.<span style="color:#5f5fff">get</span>(2).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;,&#34;</span>);
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">if</span>(possibleill.<span style="color:#5f5fff">length</span>() <span style="color:#ec0000">&gt;=</span> 1)
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        possibleill.<span style="color:#5f5fff">deleteCharAt</span>(possibleill.<span style="color:#5f5fff">length</span>()<span style="color:#ec0000">-</span>1);//去掉多余的&#39;,&#39;
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>description.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>ddescription.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withsymptom<span style="color:#ec0000">=</span>withsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withdsymptom<span style="color:#ec0000">=</span>withdsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        String ill<span style="color:#ec0000">=</span>possibleill.<span style="color:#5f5fff">toString</span>().<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        pathogeny<span style="color:#ec0000">=</span>pathogeny.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        check<span style="color:#ec0000">=</span>check.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        diagnosis<span style="color:#ec0000">=</span>diagnosis.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        sql<span style="color:#ec0000">=</span><span style="color:#008900">&#34;insert into symptomdata values(&#39;&#34;</span><span style="color:#ec0000">+</span>name<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;,&#39;0&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>bodypart<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>keshi<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>description<span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        <span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ddescription<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withdsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ill<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>check<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>diagnosis<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;)&#34;</span>;
</span></span><span style="display:flex;"><span>                                        db.<span style="color:#5f5fff">exec</span>(sql,<span style="color:#ec0000">null</span>);
</span></span><span style="display:flex;"><span>                                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(name<span style="color:#ec0000">+</span><span style="color:#008900">&#34; left:&#34;</span><span style="color:#ec0000">+</span>dataQueue.<span style="color:#5f5fff">size</span>());
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        } 
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">catch</span> (IOException e) 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(sql);
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(url);
</span></span><span style="display:flex;"><span>                                e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                        } 
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">catch</span> (Exception e) 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(sql);
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(url);
</span></span><span style="display:flex;"><span>                                e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                threadnum<span style="color:#ec0000">++</span>;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">zzkfamilydoctorcomcn</span>()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">try</span>
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        db<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> Database();
</span></span><span style="display:flex;"><span>                        db.<span style="color:#5f5fff">open</span>(<span style="color:#008900">&#34;J:/symptom.db&#34;</span>,0666);
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>//                        //按症状查询
</span></span><span style="display:flex;"><span>//                        for(int i=1;i&lt;8000;i++)
</span></span><span style="display:flex;"><span>//                        {
</span></span><span style="display:flex;"><span>//                                String cururl=&#34;http://zzk.familydoctor.com.cn/&#34;+i;
</span></span><span style="display:flex;"><span>//                                dataQueue.offer(new ELE(cururl,SYMPTOM));
</span></span><span style="display:flex;"><span>//                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        //按疾病查询
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>6900;i<span style="color:#ec0000">&lt;</span>11000;i<span style="color:#ec0000">++</span>)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                String cururl<span style="color:#ec0000">=</span><span style="color:#008900">&#34;http://jbk.familydoctor.com.cn/info&#34;</span><span style="color:#ec0000">+</span>i;
</span></span><span style="display:flex;"><span>                                dataQueue.<span style="color:#5f5fff">offer</span>(<span style="color:#ec0000">new</span> ELE(cururl,DISEASE));
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">catch</span>(Exception e)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">new</span> Thread()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        sleep(1000);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">while</span>(<span style="color:#ec0000">!</span>dataQueue.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#5f5fff">int</span> num<span style="color:#ec0000">=</span>32;
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">while</span>(num<span style="color:#ec0000">--</span> <span style="color:#ec0000">&gt;</span> 0 <span style="color:#ec0000">&amp;&amp;</span> threadnum <span style="color:#ec0000">&gt;</span> 0 <span style="color:#ec0000">&amp;&amp;</span> <span style="color:#ec0000">!</span>dataQueue.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">new</span> Thread()
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                                                                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                                                                {
</span></span><span style="display:flex;"><span>                                                                        ELE curele<span style="color:#ec0000">=</span>dataQueue.<span style="color:#5f5fff">poll</span>();
</span></span><span style="display:flex;"><span>                                                                        <span style="color:#ec0000">if</span>(curele <span style="color:#ec0000">!=</span> <span style="color:#ec0000">null</span>)
</span></span><span style="display:flex;"><span>                                                                                curele.<span style="color:#5f5fff">resolve</span>();
</span></span><span style="display:flex;"><span>                                                                }
</span></span><span style="display:flex;"><span>                                                        }.<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                sleep(200);
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                } 
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">catch</span> (InterruptedException e) 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }.<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">main</span>(String<span style="color:#ec0000">[]</span> args)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">new</span> zzkfamilydoctorcomcn();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#757575;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#ec0000">package</span> symptom;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.FileNotFoundException;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.util.LinkedList;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> java.util.Queue;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.Jsoup;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Document;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.nodes.Element;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> org.jsoup.select.Elements;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> SQLite.Database;
</span></span><span style="display:flex;"><span><span style="color:#ec0000">import</span> SQLite.Exception;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ec0000">public</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">tag120askcom</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">final</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">int</span> SYMPTOM<span style="color:#ec0000">=</span>0;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">final</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">int</span> DISEASE<span style="color:#ec0000">=</span>1;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">int</span> threadnum<span style="color:#ec0000">=</span>10;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> String beginstr<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> Queue<span style="color:#ec0000">&lt;</span>ELE<span style="color:#ec0000">&gt;</span> dataQueue<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> LinkedList<span style="color:#ec0000">&lt;</span>ELE<span style="color:#ec0000">&gt;</span>();//症状队列
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> Database db<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">private</span> <span style="color:#5f5fff">int</span> total;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">class</span> <span style="color:#5f5fff">ELE</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">ELE</span>(String name,String url,<span style="color:#5f5fff">int</span> type,String bodypart,String keshi)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(name <span style="color:#ec0000">==</span> <span style="color:#ec0000">null</span> <span style="color:#ec0000">||</span> name.<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;&#34;</span>))
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(<span style="color:#008900">&#34;error&#34;</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">name</span><span style="color:#ec0000">=</span>name;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">url</span><span style="color:#ec0000">=</span>url;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">type</span><span style="color:#ec0000">=</span>type;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">keshi</span><span style="color:#ec0000">=</span>keshi;
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">bodypart</span><span style="color:#ec0000">=</span>bodypart;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                /**数据库格式
</span></span><span style="display:flex;"><span>                 *         Name                症状/疾病名
</span></span><span style="display:flex;"><span>                        Id                        全局唯一标识
</span></span><span style="display:flex;"><span>                        IsSymptom        症状/疾病？
</span></span><span style="display:flex;"><span>                        BodyPart        身体部位                ----症状        头:眼睛
</span></span><span style="display:flex;"><span>                        Keshi                挂号科室                ----疾病        内科:男科
</span></span><span style="display:flex;"><span>                        Description        概述                        
</span></span><span style="display:flex;"><span>                        DDescription详述
</span></span><span style="display:flex;"><span>                        WithSymptom        伴随症状                ----疾病对应症状简述，逗号隔开
</span></span><span style="display:flex;"><span>                        WithDSymptom详细症状                ----疾病对应症状详述
</span></span><span style="display:flex;"><span>                        PossibleIll        相关疾病                ----症状可能疾病，大项逗号隔开，小项冒号隔开 疾病:科室:伴随症状
</span></span><span style="display:flex;"><span>                        Pathogeny        病因                        
</span></span><span style="display:flex;"><span>                        Check                检查
</span></span><span style="display:flex;"><span>                        Diagnosis        诊断鉴别
</span></span><span style="display:flex;"><span>                        Popularity        疾病/症状 搜索热度
</span></span><span style="display:flex;"><span>                 * 
</span></span><span style="display:flex;"><span>                 */
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getName</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> name;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setName</span>(String name) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">name</span> <span style="color:#ec0000">=</span> name;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getUrl</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> url;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setUrl</span>(String url) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">url</span> <span style="color:#ec0000">=</span> url;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">int</span> <span style="color:#5f5fff">getType</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> type;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setType</span>(<span style="color:#5f5fff">int</span> type) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">type</span> <span style="color:#ec0000">=</span> type;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getKeshi</span>()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> keshi;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setKeshi</span>(String keshi) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">keshi</span> <span style="color:#ec0000">=</span> keshi;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> String <span style="color:#5f5fff">getBodypart</span>() 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">return</span> bodypart;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">setBodypart</span>(String bodypart) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">this</span>.<span style="color:#5f5fff">bodypart</span> <span style="color:#ec0000">=</span> bodypart;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String name<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//症状名
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String url<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//数据地址
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> <span style="color:#5f5fff">int</span> type<span style="color:#ec0000">=</span>SYMPTOM;//疾病还是症状
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String keshi<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//疾病科室（大科室）keshi+&#34;:&#34;+血液内科
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">private</span> String bodypart<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;//身体部位        头:眼睛
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">resolve</span>()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        String description<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String ddescription<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String withsymptom<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String withdsymptom<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        StringBuilder possibleill<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>                        String pathogeny<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String check<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        String diagnosis<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        threadnum<span style="color:#ec0000">--</span>;
</span></span><span style="display:flex;"><span>                        String sql<span style="color:#ec0000">=</span><span style="color:#008900">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Document doc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(url).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">if</span>(type <span style="color:#ec0000">==</span> SYMPTOM)
</span></span><span style="display:flex;"><span>                                {//如果是症状
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;dl.p_sibox1dl.clears p&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        String temp<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;dl.p_sibox1dl.clears p a&#34;</span>).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>);
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(temp).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        Elements tagnames<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_headnav_div a&#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element tag:tagnames)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;病因&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;检查&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        check<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;诊断鉴别&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        diagnosis<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;相关疾病&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        Elements ll<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;ul.p_cbox3ul&#34;</span>);
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>ll.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                Elements eles<span style="color:#ec0000">=</span>ll.<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                                                <span style="color:#ec0000">for</span>(Element ele:eles)
</span></span><span style="display:flex;"><span>                                                                {
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">append</span>(ele.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;span.p_cbox3li1 a&#34;</span>).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;:&#34;</span>);
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">append</span>(ele.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;span.p_cbox3li2 a&#34;</span>).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;:&#34;</span>);
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">append</span>(ele.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;span.p_cbox3li3 a&#34;</span>).<span style="color:#5f5fff">text</span>());
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">append</span>(<span style="color:#008900">&#34;,&#34;</span>);
</span></span><span style="display:flex;"><span>                                                                }
</span></span><span style="display:flex;"><span>                                                                <span style="color:#ec0000">if</span>(possibleill.<span style="color:#5f5fff">length</span>() <span style="color:#ec0000">&gt;=</span> 1)
</span></span><span style="display:flex;"><span>                                                                {
</span></span><span style="display:flex;"><span>                                                                        possibleill.<span style="color:#5f5fff">deleteCharAt</span>(possibleill.<span style="color:#5f5fff">length</span>()<span style="color:#ec0000">-</span>1);//去掉多余的&#39;,&#39;
</span></span><span style="display:flex;"><span>                                                                }
</span></span><span style="display:flex;"><span>                                                        }
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>description.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>ddescription.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withsymptom<span style="color:#ec0000">=</span>withsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withdsymptom<span style="color:#ec0000">=</span>withdsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        String ill<span style="color:#ec0000">=</span>possibleill.<span style="color:#5f5fff">toString</span>().<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        pathogeny<span style="color:#ec0000">=</span>pathogeny.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        check<span style="color:#ec0000">=</span>check.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        diagnosis<span style="color:#ec0000">=</span>diagnosis.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        sql<span style="color:#ec0000">=</span><span style="color:#008900">&#34;insert into symptomdata values(&#39;&#34;</span><span style="color:#ec0000">+</span>name<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;,&#39;1&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>bodypart<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>keshi<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>description<span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        <span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ddescription<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withdsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ill<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>check<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>diagnosis<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;)&#34;</span>;
</span></span><span style="display:flex;"><span>                                        db.<span style="color:#5f5fff">exec</span>(sql,<span style="color:#ec0000">null</span>);
</span></span><span style="display:flex;"><span>                                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(name<span style="color:#ec0000">+</span><span style="color:#008900">&#34; left:&#34;</span><span style="color:#ec0000">+</span>dataQueue.<span style="color:#5f5fff">size</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34; total:&#34;</span><span style="color:#ec0000">+</span>total);
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(type <span style="color:#ec0000">==</span> DISEASE)
</span></span><span style="display:flex;"><span>                                {        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_lbox1_ab p&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        String temp<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_lbox1_ab p a&#34;</span>).<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>);
</span></span><span style="display:flex;"><span>                                        Document doc2<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(temp).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>doc2.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        Elements tagnames<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_topbox a&#34;</span>);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element tag:tagnames)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;病因&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;检查&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        check<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;鉴别&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        diagnosis<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;症状&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        withdsymptom<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">else</span> <span style="color:#ec0000">if</span>(tag.<span style="color:#5f5fff">text</span>().<span style="color:#5f5fff">equals</span>(<span style="color:#008900">&#34;并发症&#34;</span>))
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        withsymptom<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(tag.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>().<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_cleftartbox&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        description<span style="color:#ec0000">=</span>description.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        ddescription<span style="color:#ec0000">=</span>ddescription.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withsymptom<span style="color:#ec0000">=</span>withsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        withdsymptom<span style="color:#ec0000">=</span>withdsymptom.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        String ill<span style="color:#ec0000">=</span>possibleill.<span style="color:#5f5fff">toString</span>().<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        pathogeny<span style="color:#ec0000">=</span>pathogeny.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        check<span style="color:#ec0000">=</span>check.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        diagnosis<span style="color:#ec0000">=</span>diagnosis.<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;\&#39;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>).<span style="color:#5f5fff">replace</span>(<span style="color:#008900">&#39;&#34;&#39;</span>,<span style="color:#008900">&#39; &#39;</span>);
</span></span><span style="display:flex;"><span>                                        
</span></span><span style="display:flex;"><span>                                        sql<span style="color:#ec0000">=</span><span style="color:#008900">&#34;insert into symptomdata values(&#39;&#34;</span><span style="color:#ec0000">+</span>name<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;,&#39;0&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>bodypart<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>keshi<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>description<span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        <span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ddescription<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>withdsymptom<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>ill<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>
</span></span><span style="display:flex;"><span>                                                        pathogeny<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>check<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;&#34;</span><span style="color:#ec0000">+</span>diagnosis<span style="color:#ec0000">+</span><span style="color:#008900">&#34;&#39;,&#39;0&#39;)&#34;</span>;
</span></span><span style="display:flex;"><span>                                        db.<span style="color:#5f5fff">exec</span>(sql,<span style="color:#ec0000">null</span>);
</span></span><span style="display:flex;"><span>                                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(name<span style="color:#ec0000">+</span><span style="color:#008900">&#34; left:&#34;</span><span style="color:#ec0000">+</span>dataQueue.<span style="color:#5f5fff">size</span>()<span style="color:#ec0000">+</span><span style="color:#008900">&#34; total:&#34;</span><span style="color:#ec0000">+</span>total);
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        } 
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">catch</span> (IOException e) 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(sql);
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(url);
</span></span><span style="display:flex;"><span>                                e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                        } 
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">catch</span> (Exception e) 
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(sql);
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(url);
</span></span><span style="display:flex;"><span>                                e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">finally</span>
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                threadnum<span style="color:#ec0000">++</span>;
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">tag120askcom</span>()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">try</span>
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        db<span style="color:#ec0000">=</span><span style="color:#ec0000">new</span> Database();
</span></span><span style="display:flex;"><span>                        db.<span style="color:#5f5fff">open</span>(<span style="color:#008900">&#34;J:/symptom.db&#34;</span>,0666);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        Document doc<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>                        Elements eles<span style="color:#ec0000">=</span><span style="color:#ec0000">null</span>;
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        //按症状查询
</span></span><span style="display:flex;"><span>                        doc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(<span style="color:#008900">&#34;http://tag.120ask.com/zhengzhuang/&#34;</span>).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                        eles<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;ul.p_leftdivnav&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(Element ele:eles)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Elements test<span style="color:#ec0000">=</span>ele.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_lnavdisdiv h3 a&#34;</span>);
</span></span><span style="display:flex;"><span>                                Document innerdoc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(test.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                Element toprocess<span style="color:#ec0000">=</span>innerdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_header&#34;</span>).<span style="color:#5f5fff">get</span>(0);
</span></span><span style="display:flex;"><span>                                String bigbodypart<span style="color:#ec0000">=</span>toprocess.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;h3&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                Elements subset<span style="color:#ec0000">=</span>toprocess.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>);
</span></span><span style="display:flex;"><span>                                
</span></span><span style="display:flex;"><span>                                //先直接遍历症状
</span></span><span style="display:flex;"><span>                                Elements innerele<span style="color:#ec0000">=</span>innerdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_neike.clears&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>innerele.<span style="color:#5f5fff">size</span>();i<span style="color:#ec0000">+=</span>2)
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        String bigclass<span style="color:#ec0000">=</span>innerele.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();//获取大科室名
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element tempele:innerele.<span style="color:#5f5fff">get</span>(i<span style="color:#ec0000">+</span>1).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                dataQueue.<span style="color:#5f5fff">offer</span>(<span style="color:#ec0000">new</span> ELE(tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;title&#34;</span>),tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>),SYMPTOM,bigbodypart,bigclass));
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>subset.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                {//有子节点则需要连接到每个网址然后遍历症状
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element curele:subset)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                Document temp<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(curele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                                Elements innerelel<span style="color:#ec0000">=</span>temp.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_neike.clears&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>innerelel.<span style="color:#5f5fff">size</span>();i<span style="color:#ec0000">+=</span>2)
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        String bigclass<span style="color:#ec0000">=</span>innerelel.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();//获取大科室名
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">for</span>(Element tempele:innerelel.<span style="color:#5f5fff">get</span>(i<span style="color:#ec0000">+</span>1).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                dataQueue.<span style="color:#5f5fff">offer</span>(<span style="color:#ec0000">new</span> ELE(tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;title&#34;</span>),tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>),SYMPTOM,
</span></span><span style="display:flex;"><span>                                                                                bigbodypart<span style="color:#ec0000">+</span><span style="color:#008900">&#34;:&#34;</span><span style="color:#ec0000">+</span>curele.<span style="color:#5f5fff">text</span>(),bigclass));
</span></span><span style="display:flex;"><span>                                                        }
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        //按疾病查询
</span></span><span style="display:flex;"><span>                        doc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(<span style="color:#008900">&#34;http://tag.120ask.com/jibing/&#34;</span>).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                        eles<span style="color:#ec0000">=</span>doc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;ul.p_leftdivnav&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(Element ele:eles)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                Elements test<span style="color:#ec0000">=</span>ele.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.p_lnavdisdiv h3 a&#34;</span>);
</span></span><span style="display:flex;"><span>                                Document innerdoc<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(test.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                Element toprocess<span style="color:#ec0000">=</span>innerdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_header&#34;</span>).<span style="color:#5f5fff">get</span>(0);
</span></span><span style="display:flex;"><span>                                String bigbodypart<span style="color:#ec0000">=</span>toprocess.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;h3&#34;</span>).<span style="color:#5f5fff">text</span>();
</span></span><span style="display:flex;"><span>                                Elements subset<span style="color:#ec0000">=</span>toprocess.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>);
</span></span><span style="display:flex;"><span>                                //先直接遍历症状
</span></span><span style="display:flex;"><span>                                Elements innerele<span style="color:#ec0000">=</span>innerdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_neike.clears&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>innerele.<span style="color:#5f5fff">size</span>();i<span style="color:#ec0000">+=</span>2)
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        String bigclass<span style="color:#ec0000">=</span>innerele.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();//获取大科室名
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element tempele:innerele.<span style="color:#5f5fff">get</span>(i<span style="color:#ec0000">+</span>1).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                dataQueue.<span style="color:#5f5fff">offer</span>(<span style="color:#ec0000">new</span> ELE(tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;title&#34;</span>),tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>),DISEASE,bigbodypart,bigclass));
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">if</span>(<span style="color:#ec0000">!</span>subset.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                {//有子节点则需要连接到每个网址然后遍历症状
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">for</span>(Element curele:subset)
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                Document temp<span style="color:#ec0000">=</span>Jsoup.<span style="color:#5f5fff">connect</span>(curele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>)).<span style="color:#5f5fff">timeout</span>(0).<span style="color:#5f5fff">get</span>();
</span></span><span style="display:flex;"><span>                                                Elements innerele1<span style="color:#ec0000">=</span>innerdoc.<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;div.w_neike.clears&#34;</span>).<span style="color:#5f5fff">get</span>(0).<span style="color:#5f5fff">children</span>();
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">for</span>(<span style="color:#5f5fff">int</span> i<span style="color:#ec0000">=</span>0;i<span style="color:#ec0000">&lt;</span>innerele1.<span style="color:#5f5fff">size</span>();i<span style="color:#ec0000">+=</span>2)
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        String bigclass<span style="color:#ec0000">=</span>innerele1.<span style="color:#5f5fff">get</span>(i).<span style="color:#5f5fff">text</span>();//获取大科室名
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">for</span>(Element tempele:innerele1.<span style="color:#5f5fff">get</span>(i<span style="color:#ec0000">+</span>1).<span style="color:#5f5fff">select</span>(<span style="color:#008900">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                dataQueue.<span style="color:#5f5fff">offer</span>(<span style="color:#ec0000">new</span> ELE(tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;title&#34;</span>),tempele.<span style="color:#5f5fff">attr</span>(<span style="color:#008900">&#34;abs:href&#34;</span>),DISEASE,bigbodypart,bigclass));
</span></span><span style="display:flex;"><span>                                                        }
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(dataQueue.<span style="color:#5f5fff">size</span>());
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">for</span>(ELE ele:dataQueue)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                System.<span style="color:#5f5fff">out</span>.<span style="color:#5f5fff">println</span>(ele.<span style="color:#5f5fff">name</span>);
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                        total<span style="color:#ec0000">=</span>dataQueue.<span style="color:#5f5fff">size</span>();
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">if</span>(beginstr <span style="color:#ec0000">!=</span> <span style="color:#ec0000">null</span>)
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">while</span>(<span style="color:#ec0000">!</span>dataQueue.<span style="color:#5f5fff">poll</span>().<span style="color:#5f5fff">getName</span>().<span style="color:#5f5fff">equals</span>(beginstr))
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        ;
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">catch</span> (FileNotFoundException e) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                } 
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">catch</span> (IOException e) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                } 
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">catch</span> (Exception e) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">new</span> Thread()
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                        <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                        {
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">try</span> 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        sleep(1000);
</span></span><span style="display:flex;"><span>                                        <span style="color:#ec0000">while</span>(<span style="color:#ec0000">!</span>dataQueue.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                        {
</span></span><span style="display:flex;"><span>                                                <span style="color:#5f5fff">int</span> num<span style="color:#ec0000">=</span>1;
</span></span><span style="display:flex;"><span>                                                <span style="color:#ec0000">while</span>(num<span style="color:#ec0000">--</span> <span style="color:#ec0000">&gt;</span> 0 <span style="color:#ec0000">&amp;&amp;</span> threadnum <span style="color:#ec0000">&gt;</span> 0 <span style="color:#ec0000">&amp;&amp;</span> <span style="color:#ec0000">!</span>dataQueue.<span style="color:#5f5fff">isEmpty</span>())
</span></span><span style="display:flex;"><span>                                                {
</span></span><span style="display:flex;"><span>                                                        <span style="color:#ec0000">new</span> Thread()
</span></span><span style="display:flex;"><span>                                                        {
</span></span><span style="display:flex;"><span>                                                                <span style="color:#008900">@Override</span>
</span></span><span style="display:flex;"><span>                                                                <span style="color:#ec0000">public</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">run</span>()
</span></span><span style="display:flex;"><span>                                                                {
</span></span><span style="display:flex;"><span>                                                                        ELE curele<span style="color:#ec0000">=</span>dataQueue.<span style="color:#5f5fff">poll</span>();
</span></span><span style="display:flex;"><span>                                                                        <span style="color:#ec0000">if</span>(curele <span style="color:#ec0000">!=</span> <span style="color:#ec0000">null</span>)
</span></span><span style="display:flex;"><span>                                                                                curele.<span style="color:#5f5fff">resolve</span>();
</span></span><span style="display:flex;"><span>                                                                }
</span></span><span style="display:flex;"><span>                                                        }.<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>                                                }
</span></span><span style="display:flex;"><span>                                                sleep(200);
</span></span><span style="display:flex;"><span>                                        }
</span></span><span style="display:flex;"><span>                                } 
</span></span><span style="display:flex;"><span>                                <span style="color:#ec0000">catch</span> (InterruptedException e) 
</span></span><span style="display:flex;"><span>                                {
</span></span><span style="display:flex;"><span>                                        e.<span style="color:#5f5fff">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                                }
</span></span><span style="display:flex;"><span>                        }
</span></span><span style="display:flex;"><span>                }.<span style="color:#5f5fff">start</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#ec0000">public</span> <span style="color:#ec0000">static</span> <span style="color:#5f5fff">void</span> <span style="color:#5f5fff">main</span>(String<span style="color:#ec0000">[]</span> args)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>                <span style="color:#ec0000">new</span> tag120askcom();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
    
    <script src="https://giscus.app/client.js"
        data-repo="lich4/lich4.github.io"
        data-repo-id="R_kgDOMTT_mw"
        data-category=""
        data-category-id="DIC_kwDOMTT_m84Cjbim"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

    
  </div>

  


  

  
  

<div class="single-pagination">
    <hr />

    <div class="flex">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/android_posts/20140101_android_resolution/">
                        安卓布局适应任意分辨率
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
            <div class="single-pagination-container-next">
                <div class="single-pagination-text">
                    <a href="/android_posts/20160203_apk_debug/">
                        强制修改apk可调试性
                    </a>
                </div>
                <div class="single-pagination-text">→</div>
            </div>
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


      </main>
    </div>

    <footer>
      

    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    



    </footer>
    
  </body>

  <script>

  function isAuto() {
    return document.body.classList.contains("auto");
  }

  function setTheme() {
    if (!isAuto()) {
      return
    }

    document.body.classList.remove("auto");
    let cls = "light";
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      cls = "dark";
    }

    document.body.classList.add(cls);
  }

  function invertBody() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  if (isAuto()) {
    window.matchMedia('(prefers-color-scheme: dark)').addListener(invertBody);
  }

  setTheme();

</script>

</html>